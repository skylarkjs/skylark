{"version":3,"sources":["_devices/orientation.js"],"names":["define","langx","orientation","window","DeviceOrientationEvent","addEventListener","eventData","lr","gamma","fb","beta","dir","alpha","grav","OrientationEvent","x","y","z","mixin","isSupported","on","duration","navigator","vibrate","off"],"mappings":";;;;;;;AAAAA,QACI,YACD,SAASC,GAqCR,QAASC,KACL,MAAOA,GAkBX,MArDKC,QAAOC,uBAGRD,OAAOE,iBAAkB,oBAAqB,SAAUC,KAGhDC,GAAID,EAAUE,MACdC,GAAIH,EAAUI,KACdC,IAAKL,EAAUM,MACfC,KAAM,SAKX,GAEKV,OAAOW,kBAEfX,OAAOE,iBAAiB,iBAAkB,SAAUC,KAG5CC,GAAkB,GAAdD,EAAUS,EACdN,GAAIH,EAAUU,MAGdL,IAAK,KACLE,KAAMP,EAAUW,MAKrB,GAOPhB,EAAMiB,MAAMhB,GACRiB,YAAc,WACV,SAAUhB,OAAOC,yBAA0BD,OAAOW,mBAGtDM,GAAK,SAASC,GACVC,UAAUC,QAAQF,IAGtBG,IAAM,WACFF,UAAUC,QAAQ,MAKlBrB","file":"../../_devices/orientation.js","sourcesContent":["define([\r\n    \"../langx\"\r\n], function(langx) {\r\n\r\n    // setup\r\n    if ( window.DeviceOrientationEvent ) {\r\n        \r\n        // Listen for the deviceorientation event and handle the raw data\r\n        window.addEventListener( 'deviceorientation', function( eventData ) {\r\n            \r\n            var data = {\r\n                lr: eventData.gamma, // gamma is the left-to-right tilt in degrees, where right is positive\r\n                fb: eventData.beta, // beta is the front-to-back tilt in degrees, where front is positive\r\n                dir: eventData.alpha, // alpha is the compass direction the device is facing in degrees\r\n                grav: null\r\n            };\r\n            \r\n            //ps.publish( data );\r\n            \r\n        }, false);\r\n        \r\n    } else if ( window.OrientationEvent ) {\r\n        \r\n        window.addEventListener('MozOrientation', function( eventData ) {\r\n            \r\n            var data = {\r\n                lr: eventData.x * 90, // x is the left-to-right tilt from -1 to +1, so we need to convert to degrees\r\n                fb: eventData.y * -90, // y is the front-to-back tilt from -1 to +1, so we need to convert to degrees\r\n                            // We also need to invert the value so tilting the device towards us (forward) \r\n                            // results in a positive value. \r\n                dir: null, \r\n                grav: eventData.z // z is the vertical acceleration of the device\r\n            };\r\n            \r\n            //ps.publish( data );\r\n            \r\n        }, false);\r\n    }\r\n\r\n    function orientation() {\r\n        return orientation;\r\n    }\r\n\r\n    langx.mixin(orientation, {\r\n        isSupported : function(){\r\n            return !!(window.DeviceOrientationEvent || window.OrientationEvent);\r\n        },\r\n\r\n        on : function(duration) {\r\n            navigator.vibrate(duration);\r\n        },\r\n\r\n        off : function() {\r\n            navigator.vibrate(0);\r\n        }\r\n    });\r\n\r\n\r\n    return  orientation;\r\n});\r\n"]}