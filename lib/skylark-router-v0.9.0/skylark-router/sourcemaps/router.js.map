{"version":3,"sources":["router.js"],"names":["define","skylark","langx","browser","datax","eventer","async","current","_curCtx","dispatch","ctx","_prevCtx","ret","route","exit","path","params","m","map","r","enter","Deferred","when","then","trigger","_hub","previous","go","force","router","useHistoryApi","state","window","history","pushState","document","title","_baseUrl","replace","create","useHashbang","newHash","location","hash","noCache","finded","_cache","each","_routes","name","match","routeName","baseUrl","isDefined","this","hub","homePath","_homePath","setting","settings","routes","mixin","Route","start","host","initPath","pathname","undefined","on","body","e","elm","currentTarget","url","attr","isSameOrigin","href","indexOf","substr","length","stop","Evented","inherit","klassName","init","pathto","pattern","paramNames","paramName","substring","_setting","regex","RegExp","self","forEach","eventName","isFunction","query","_entering","result","_entered","safeMixin","ok","_exiting","_exited","names","x","slice","decodeURIComponent","exec","i","len","val","off","apply","arguments","one","type","props"],"mappings":"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","file":"../router.js","sourcesContent":["define([\r\n    \"skylark-utils/skylark\",\r\n    \"skylark-utils/langx\",\r\n    \"skylark-utils/browser\",\r\n    \"skylark-utils/datax\",\r\n    \"skylark-utils/eventer\",\r\n    \"skylark-utils/async\"\r\n], function(skylark, langx, browser, datax, eventer,async) {\r\n\r\n    var _curCtx,\r\n        _prevCtx,\r\n        _baseUrl,\r\n        _homePath,\r\n        _routes = {},\r\n        _cache = {},\r\n        _hub = new langx.Evented();\r\n\r\n    var Route = langx.Evented.inherit({\r\n        klassName: \"Route\",\r\n        init: function(name, setting) {\r\n            setting = langx.mixin({}, setting);\r\n            var pathto = setting.pathto || \"\",\r\n                pattern = pathto,\r\n                paramNames = pattern.match(/\\:([a-zA-Z0-9_]+)/g);\r\n            if (paramNames !== null) {\r\n                paramNames = paramNames.map(function(paramName) {\r\n                    return paramName.substring(1);\r\n                });\r\n                pattern = pattern.replace(/\\:([a-zA-Z0-9_]+)/g, '(.*?)');\r\n            } else {\r\n                paramNames = [];\r\n            }\r\n            if (pattern === \"*\") {\r\n                pattern = \"(.*)\";\r\n            } else {\r\n                pattern = pattern.replace(\"/\", \"\\\\/\");\r\n            }\r\n\r\n            this._setting = setting;\r\n            this.name = name;\r\n            this.pathto = pathto;\r\n            this.paramNames = paramNames;\r\n            this.params = pattern;\r\n            this.regex = new RegExp(\"^\" + pattern + \"$\", \"\");\r\n\r\n            var self = this;\r\n            [\"entering\", \"entered\", \"exiting\", \"exited\"].forEach(function(eventName) {\r\n                if (langx.isFunction(setting[eventName])) {\r\n                    self.on(eventName, setting[eventName]);\r\n                }\r\n            });\r\n        },\r\n\r\n        enter: function(ctx,query) {\r\n            if (query) {\r\n                var r = this._entering(ctx);\r\n\r\n                return async.Deferred.when(r).then(function(){\r\n                    var e = eventer.create(\"entering\", {\r\n                        route: this,\r\n                        result: true\r\n                    });\r\n\r\n                    eventer.trigger(this, e);\r\n\r\n                    return e.result;\r\n                });\r\n            } else {\r\n                this._entered(ctx);\r\n\r\n                eventer.trigger(this, \"entered\", langx.safeMixin({\r\n                    route: this\r\n                }, ctx));\r\n                return this;\r\n            }\r\n        },\r\n\r\n        exit: function(ctx, query) {\r\n            if (query) {\r\n                var ok = this._exiting(ctx);\r\n                if (!ok) {\r\n                    return false;\r\n                }\r\n\r\n                var e = eventer.create(\"exiting\", {\r\n                    route: this,\r\n                    result: true\r\n                });\r\n\r\n                eventer.trigger(this, e);\r\n\r\n                return e.result;\r\n            } else {\r\n                this._exited(ctx);\r\n                eventer.trigger(this, \"exited\", langx.safeMixin({\r\n                    route: this\r\n                }, ctx));\r\n\r\n                return this;\r\n            }\r\n        },\r\n\r\n        match: function(path) {\r\n            var names = this.paramNames,\r\n                x = path.indexOf('?'),\r\n                path = ~x ? path.slice(0, x) : decodeURIComponent(path),\r\n                m = this.regex.exec(path);\r\n\r\n            if (!m) {\r\n                return false\r\n            };\r\n\r\n            var params = {};\r\n            for (var i = 1, len = m.length; i < len; ++i) {\r\n                var name = names[i - 1],\r\n                    val = decodeURIComponent(m[i]);\r\n                params[name] = val;\r\n            }\r\n\r\n            return params;\r\n        },\r\n\r\n        path: function(params) {\r\n            var path = this.pathto;\r\n            if (params) {\r\n                path = path.replace(/:([a-zA-Z0-9_]+)/g, function(match, paramName) {\r\n                    return params[paramName];\r\n                });\r\n            }\r\n            return path;\r\n        },\r\n\r\n        _entering: function(ctx) {\r\n            return true;\r\n        },\r\n        _entered: function(ctx) {\r\n            return true;\r\n        },\r\n        _exiting: function(ctx) {\r\n            return true;\r\n        },\r\n        _exited: function(ctx) {\r\n            return true;\r\n        },\r\n    });\r\n\r\n    function current() {\r\n        return _curCtx;\r\n    }\r\n\r\n    // refresh the current route\r\n    function dispatch(ctx) {\r\n\r\n        if (_prevCtx) {\r\n            var ret = _prevCtx.route.exit({\r\n                path: _prevCtx.path,\r\n                params: _prevCtx.params\r\n            }, true);\r\n            if (!ret) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        _prevCtx = _curCtx;\r\n        _curCtx = ctx;\r\n        if (!_curCtx.route) {\r\n            var m = map(_curCtx.path);\r\n            _curCtx.route = m.route;\r\n            _curCtx.params = m.params;\r\n        }\r\n\r\n        var r = _curCtx.route.enter({\r\n            path: _curCtx.path,\r\n            params: _curCtx.params\r\n        },true);\r\n\r\n        async.Deferred.when(r).then(function() {\r\n            eventer.trigger(_hub, \"routing\", {\r\n                current: _curCtx,\r\n                previous: _prevCtx\r\n            });\r\n\r\n            _curCtx.route.enter({\r\n                path: _curCtx.path,\r\n                params: _curCtx.params\r\n            },false);\r\n\r\n            if (_prevCtx) {\r\n                _prevCtx.route.exit({\r\n                    path: _prevCtx.path,\r\n                    params: _prevCtx.params\r\n                }, false);\r\n            }\r\n\r\n            eventer.trigger(_hub, \"routed\", {\r\n                current: _curCtx,\r\n                previous: _prevCtx\r\n            });\r\n        });\r\n    }\r\n\r\n    function go(path, force) {\r\n        if (!force && _curCtx && _curCtx.path == path) {\r\n            return false;\r\n        }\r\n        var ctx = map(path);\r\n        if (ctx) {\r\n            ctx.path = path;\r\n\r\n            if (router.useHistoryApi) {\r\n                var state = {\r\n                    path: path\r\n                }\r\n\r\n                window.history.pushState(state, document.title, (_baseUrl + path).replace(\"//\", \"/\"));\r\n                eventer.trigger(window, eventer.create(\"popstate\", {\r\n                    state: state\r\n                }));\r\n            } else if (router.useHashbang) {\r\n                var newHash = \"#!\" + path;\r\n                if (window.location.hash !== newHash) {\r\n                    window.location.hash = newHash;\r\n                } else {\r\n                    dispatch(ctx);\r\n                };\r\n            } else {\r\n                dispatch(ctx);\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    function map(path, noCache) {\r\n        var finded = false;\r\n        if (!noCache) {\r\n            finded = _cache[path];\r\n            if (finded) {\r\n                return finded;\r\n            }\r\n        }\r\n        langx.each(_routes, function(name, route) {\r\n            var ret = route.match(path);\r\n            if (ret) {\r\n                finded = {\r\n                    route: route,\r\n                    params: ret\r\n                }\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n        if (finded && !noCache) {\r\n            _cache[path] = finded;\r\n        }\r\n        return finded;\r\n    }\r\n\r\n    function path(routeName, params) {\r\n        var route = _routes[routeName],\r\n            path;\r\n        if (route) {\r\n            path = route.path(params);\r\n        }\r\n        return path;\r\n    }\r\n\r\n    function previous() {\r\n        return _prevCtx;\r\n    }\r\n\r\n    function baseUrl(path) {\r\n        if (langx.isDefined(path)) {\r\n            _baseUrl = path;\r\n            return this;\r\n        } else {\r\n            return _baseUrl;\r\n        }\r\n    }\r\n\r\n    function hub(){\r\n        return _hub;\r\n    }\r\n\r\n    function homePath(path) {\r\n        if (langx.isDefined(path)) {\r\n            _homePath = path;\r\n            return this;\r\n        } else {\r\n            return _homePath;\r\n        }\r\n    }\r\n\r\n    function route(name, setting) {\r\n        if (langx.isDefined(setting)) {\r\n            var settings = {};\r\n            settings[name] = setting;\r\n            routes(settings);\r\n            return this;\r\n        } else {\r\n            return _routes[name];\r\n        }\r\n    }\r\n\r\n    function routes(settings) {\r\n        if (!langx.isDefined(settings)) {\r\n            return langx.mixin({}, _routes);\r\n        } else {\r\n            for (var name in settings) {\r\n                _routes[name] = new router.Route(name, settings[name]);\r\n            }\r\n        }\r\n    }\r\n\r\n    //starts routing urls\r\n    function start() {\r\n        if (router.useHashbang == null && router.useHistoryApi == null) {\r\n            if (window.location.host) {\r\n                //web access\r\n                router.useHistoryApi = true;\r\n            } else {\r\n                // local access\r\n                router.useHashbang = true;\r\n            }\r\n        }\r\n\r\n        var initPath;\r\n\r\n        if (router.useHistoryApi) {\r\n            initPath = window.location.pathname;\r\n            if (_baseUrl === undefined) {\r\n                _baseUrl = initPath.replace(/\\/$/, \"\");\r\n            }\r\n            initPath = initPath.replace(_baseUrl, \"\") || _homePath || \"/\";\r\n        } else if (router.useHashbang) {\r\n            initPath = window.location.hash.replace(\"#!\", \"\") || _homePath || \"/\";\r\n        } else {\r\n            initPath = \"/\";\r\n        }\r\n\r\n        eventer.on(document.body, \"click\", \"a[href]\", function(e) {\r\n            var elm = e.currentTarget,\r\n                url = datax.attr(elm, \"href\");\r\n\r\n            if (url == \"#\") {\r\n                return;\r\n            }\r\n            if (url && langx.isSameOrigin(elm.href)) {\r\n                if (url.indexOf(_baseUrl) === 0) {\r\n                    url = url.substr(_baseUrl.length);\r\n                    eventer.stop(e);\r\n                    url = url.replace('#!', '');\r\n                    go(url);\r\n                }\r\n            }\r\n\r\n        });\r\n        if (router.useHistoryApi) {\r\n            eventer.on(window, \"popstate\", function(e) {\r\n                if(e.state) dispatch(e.state);\r\n                eventer.stop(e);\r\n            });\r\n        } else if (router.useHashbang) {\r\n            eventer.on(window, \"hashchange\", function(e) {\r\n                dispatch({\r\n                    path: window.location.hash.replace(/^#!/, \"\")\r\n                });\r\n                eventer.stop(e);\r\n            });\r\n        }\r\n\r\n        go(initPath);\r\n    }\r\n\r\n    var router = function() {\r\n        return router;\r\n    };\r\n\r\n    langx.mixin(router, {\r\n        \"Route\": Route,\r\n\r\n        // Current path being processed\r\n        \"current\": current,\r\n\r\n        // Changes the current path\r\n        \"go\": go,\r\n\r\n        \"map\": map,\r\n\r\n        \"hub\": hub,\r\n\r\n        \"off\": function() {\r\n            _hub.off.apply(_hub, arguments);\r\n        },\r\n\r\n        \"on\": function() {\r\n            _hub.on.apply(_hub, arguments);\r\n        },\r\n\r\n        \"one\": function() {\r\n            _hub.one.apply(_hub, arguments);\r\n        },\r\n\r\n        // Returns the path of the named route\r\n        \"path\": path,\r\n\r\n        \"previous\": previous,\r\n\r\n        \"baseUrl\": baseUrl,\r\n\r\n        \"homePath\": homePath,\r\n\r\n        \"route\": route,\r\n\r\n        \"routes\": routes,\r\n\r\n        //starts routing urls\r\n        \"start\": start,\r\n\r\n        \"trigger\": function(type, props) {\r\n            eventer.trigger(_hub, type, props);\r\n            return this;\r\n        },\r\n\r\n        \"useHistoryApi\": null,\r\n        \"useHashbang\": null\r\n    });\r\n\r\n    return skylark.router = router;\r\n});\r\n"]}