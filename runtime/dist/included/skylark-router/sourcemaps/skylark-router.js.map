{"version":3,"sources":["skylark-router.js"],"names":["factory","globals","absolute","relative","base","stack","split","parts","pop","i","length","push","join","define","require","isAmd","amd","isCmd","exports","map","id","deps","dep","resolved","hasOwnProperty","Error","module","args","forEach","apply","window","skylarkjs","skylark","langx","createEvent","type","props","e","CustomEvent","safeMixin","current","_curCtx","dispatch","ctx","ret","route","exit","path","params","_prevCtx","m","r","enter","force","Deferred","when","then","_hub","trigger","previous","go","router","useHistoryApi","state","history","pushState","document","title","_baseUrl","replace","dispatchEvent","useHashbang","newHash","location","hash","noCache","finded","_cache","each","_routes","name","match","routeName","baseUrl","isDefined","this","hub","homePath","_homePath","setting","settings","routes","mixin","Route","start","host","initPath","pathname","undefined","startsWith","addEventListener","preventDefault","Evented","inherit","klassName","init","pathto","pattern","paramNames","paramName","substring","_setting","regex","RegExp","self","eventName","isFunction","on","query","_entering","result","_entered","ok","_exiting","_exited","names","x","indexOf","slice","decodeURIComponent","exec","len","val","off","arguments","one","main"],"mappings":"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","file":"../skylark-router.js","sourcesContent":["define('skylark-router/router',[\n    \"skylark-langx/skylark\",\n    \"skylark-langx/langx\"\n], function(skylark, langx) {\n\n    var _curCtx,\n        _prevCtx,\n        _baseUrl,\n        _homePath,\n        _routes = {},\n        _cache = {},\n        _hub = new langx.Evented();\n\n    function createEvent(type,props) {\n        var e = new CustomEvent(type,props);\n        return langx.safeMixin(e, props);\n    }\n\n    var Route = langx.Evented.inherit({\n        klassName: \"Route\",\n        init: function(name, setting) {\n            setting = langx.mixin({}, setting);\n            var pathto = setting.pathto || \"\",\n                pattern = pathto,\n                paramNames = pattern.match(/\\:([a-zA-Z0-9_]+)/g);\n            if (paramNames !== null) {\n                paramNames = paramNames.map(function(paramName) {\n                    return paramName.substring(1);\n                });\n                pattern = pattern.replace(/\\:([a-zA-Z0-9_]+)/g, '(.*?)');\n            } else {\n                paramNames = [];\n            }\n            if (pattern === \"*\") {\n                pattern = \"(.*)\";\n            } else {\n                pattern = pattern.replace(\"/\", \"\\\\/\");\n            }\n\n            this._setting = setting;\n            this.name = name;\n            this.pathto = pathto;\n            this.paramNames = paramNames;\n            this.params = pattern;\n            this.regex = new RegExp(\"^\" + pattern + \"$\", \"\");\n\n            var self = this;\n            [\"entering\", \"entered\", \"exiting\", \"exited\"].forEach(function(eventName) {\n                if (langx.isFunction(setting[eventName])) {\n                    self.on(eventName, setting[eventName]);\n                }\n            });\n        },\n\n        enter: function(ctx,query) {\n            if (query) {\n                var r = this._entering(ctx),\n                    self = this;\n\n                return langx.Deferred.when(r).then(function(){\n                    var e = createEvent(\"entering\", {\n                        route: self,\n                        result: true\n                    });\n\n                    self.trigger(e);\n\n                    return e.result;\n                });\n            } else {\n                this._entered(ctx);\n\n                this.trigger(createEvent(\"entered\", langx.safeMixin({\n                    route: this\n                }, ctx)));\n                return this;\n            }\n        },\n\n        exit: function(ctx, query) {\n            if (query) {\n                var ok = this._exiting(ctx);\n                if (!ok) {\n                    return false;\n                }\n\n                var e = createEvent(\"exiting\", {\n                    route: this,\n                    result: true\n                });\n\n                this.trigger(e);\n\n                return e.result;\n            } else {\n                this._exited(ctx);\n                this.trigger(createEvent(\"exited\", langx.safeMixin({\n                    route: this\n                }, ctx)));\n\n                return this;\n            }\n        },\n\n        match: function(path) {\n            var names = this.paramNames,\n                x = path.indexOf('?'),\n                path = ~x ? path.slice(0, x) : decodeURIComponent(path),\n                m = this.regex.exec(path);\n\n            if (!m) {\n                return false\n            };\n\n            var params = {};\n            for (var i = 1, len = m.length; i < len; ++i) {\n                var name = names[i - 1],\n                    val = decodeURIComponent(m[i]);\n                params[name] = val;\n            }\n\n            return params;\n        },\n\n        path: function(params) {\n            var path = this.pathto;\n            if (params) {\n                path = path.replace(/:([a-zA-Z0-9_]+)/g, function(match, paramName) {\n                    return params[paramName];\n                });\n            }\n            return path;\n        },\n\n        _entering: function(ctx) {\n            return true;\n        },\n        _entered: function(ctx) {\n            return true;\n        },\n        _exiting: function(ctx) {\n            return true;\n        },\n        _exited: function(ctx) {\n            return true;\n        },\n    });\n\n    function current() {\n        return _curCtx;\n    }\n\n    // refresh the current route\n    function dispatch(ctx) {\n\n        if (_curCtx) {\n            var ret = _curCtx.route.exit({\n                path: _curCtx.path,\n                params: _curCtx.params\n            }, true);\n            if (!ret) {\n                return;\n            }\n        }\n\n        _prevCtx = _curCtx;\n        _curCtx = ctx;\n        if (!_curCtx.route) {\n            var m = map(_curCtx.path);\n            _curCtx.route = m.route;\n            _curCtx.params = m.params;\n        }\n\n        var r = _curCtx.route.enter({\n            force: _curCtx.force,\n            path: _curCtx.path,\n            params: _curCtx.params\n        },true);\n\n        langx.Deferred.when(r).then(function() {\n            _hub.trigger(createEvent(\"routing\", {\n                current: _curCtx,\n                previous: _prevCtx\n            }));\n\n            _curCtx.route.enter({\n                path: _curCtx.path,\n                params: _curCtx.params\n            },false);\n\n            if (_prevCtx) {\n                _prevCtx.route.exit({\n                    path: _prevCtx.path,\n                    params: _prevCtx.params\n                }, false);\n            }\n\n            _hub.trigger(createEvent(\"routed\", {\n                current: _curCtx,\n                previous: _prevCtx\n            }));\n        });\n    }\n\n    function go(path, force) {\n        if (!force && _curCtx && _curCtx.path == path) {\n            return false;\n        }\n        var ctx = map(path);\n        if (ctx) {\n            ctx.path = path;\n\n            if (router.useHistoryApi) {\n                var state = {\n                    force: force,\n                    path: path\n                }\n\n                window.history.pushState(state, document.title, (_baseUrl + path).replace(\"//\", \"/\"));\n                window.dispatchEvent(createEvent(\"popstate\", {\n                    state: state\n                }));\n            } else if (router.useHashbang) {\n                var newHash = \"#!\" + path;\n                if (window.location.hash !== newHash) {\n                    window.location.hash = newHash;\n                } else {\n                    dispatch(ctx);\n                };\n            } else {\n                dispatch(ctx);\n            }\n        }\n        return true;\n    }\n\n    function map(path, noCache) {\n        var finded = false;\n        if (!noCache) {\n            finded = _cache[path];\n            if (finded) {\n                return finded;\n            }\n        }\n        langx.each(_routes, function(name, route) {\n            var ret = route.match(path);\n            if (ret) {\n                finded = {\n                    route: route,\n                    params: ret\n                }\n                return false;\n            }\n            return true;\n        });\n        if (finded && !noCache) {\n            _cache[path] = finded;\n        }\n        return finded;\n    }\n\n    function path(routeName, params) {\n        var route = _routes[routeName],\n            path;\n        if (route) {\n            path = route.path(params);\n        }\n        return path;\n    }\n\n    function previous() {\n        return _prevCtx;\n    }\n\n    function baseUrl(path) {\n        if (langx.isDefined(path)) {\n            _baseUrl = path;\n            return this;\n        } else {\n            return _baseUrl;\n        }\n    }\n\n    function hub(){\n        return _hub;\n    }\n\n    function homePath(path) {\n        if (langx.isDefined(path)) {\n            _homePath = path;\n            return this;\n        } else {\n            return _homePath;\n        }\n    }\n\n    function route(name, setting) {\n        if (langx.isDefined(setting)) {\n            var settings = {};\n            settings[name] = setting;\n            routes(settings);\n            return this;\n        } else {\n            return _routes[name];\n        }\n    }\n\n    function routes(settings) {\n        if (!langx.isDefined(settings)) {\n            return langx.mixin({}, _routes);\n        } else {\n            for (var name in settings) {\n                _routes[name] = new router.Route(name, settings[name]);\n            }\n        }\n    }\n\n    //starts routing urls\n    function start() {\n        if (router.useHashbang == null && router.useHistoryApi == null) {\n            if (window.location.host  && window.history.pushState) {\n                //web access\n                router.useHistoryApi = true;\n            } else {\n                // local access\n                router.useHashbang = true;\n            }\n        }\n\n        var initPath = \"\";\n\n        if (router.useHistoryApi) {\n            initPath = window.location.pathname;\n            if (_baseUrl === undefined) {\n                _baseUrl = initPath.replace(/\\/$/, \"\");\n            }\n            initPath = initPath.replace(_baseUrl, \"\") || _homePath || \"/\";\n        } else if (router.useHashbang) {\n            initPath = window.location.hash.replace(\"#!\", \"\") || _homePath || \"/\";\n        } else {\n            initPath = \"/\";\n        }\n\n        if (!initPath.startsWith(\"/\")) {\n            initPath = \"/\" + initPath;\n        }\n        /*\n        eventer.on(document.body, \"click\", \"a[href]\", function(e) {\n            var elm = e.currentTarget,\n                url = elm.getAttribute(\"href\");\n\n            if (url == \"#\") {\n                return;\n            }\n            if (url && langx.isSameOrigin(elm.href)) {\n                if (url.indexOf(_baseUrl) === 0) {\n                    url = url.substr(_baseUrl.length);\n                    eventer.stop(e);\n                    url = url.replace('#!', '');\n                    go(url);\n                }\n            }\n        });\n        */\n        if (router.useHistoryApi) {\n            window.addEventListener(\"popstate\", function(e) {\n                if(e.state) dispatch(e.state);\n                e.preventDefault();\n            });\n        } else if (router.useHashbang) {\n            window.addEventListener(\"hashchange\", function(e) {\n                dispatch({\n                    path: window.location.hash.replace(/^#!/, \"\")\n                });\n                e.preventDefault();\n            });\n        }\n\n        go(initPath);\n    }\n\n    var router = function() {\n        return router;\n    };\n\n    langx.mixin(router, {\n        \"Route\": Route,\n\n        // Current path being processed\n        \"current\": current,\n\n        // Changes the current path\n        \"go\": go,\n\n        \"map\": map,\n\n        \"hub\": hub,\n\n        \"off\": function() {\n            _hub.off.apply(_hub, arguments);\n        },\n\n        \"on\": function() {\n            _hub.on.apply(_hub, arguments);\n        },\n\n        \"one\": function() {\n            _hub.one.apply(_hub, arguments);\n        },\n\n        // Returns the path of the named route\n        \"path\": path,\n\n        \"previous\": previous,\n\n        \"baseUrl\": baseUrl,\n\n        \"homePath\": homePath,\n\n        \"route\": route,\n\n        \"routes\": routes,\n\n        //starts routing urls\n        \"start\": start,\n\n        \"trigger\": function(e) {\n            _hub.trigger(e);\n            return this;\n        },\n\n        \"useHistoryApi\": null,\n        \"useHashbang\": null\n    });\n\n    return skylark.router = router;\n});\n\ndefine('skylark-router/main',[\n    \"skylark-langx/skylark\",\n    \"./router\"\n], function(skylark) {\n    return skylark;\n});\n\ndefine('skylark-router', ['skylark-router/main'], function (main) { return main; });\n\n"]}