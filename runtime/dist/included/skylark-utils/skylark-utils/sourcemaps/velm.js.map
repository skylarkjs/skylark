{"version":3,"sources":["velm.js"],"names":["define","skylark","langx","datax","dnd","eventer","filer","finder","fx","geom","mover","noder","styler","_delegator","fn","context","self","this","elem","domNode","ret","apply","concat","slice","call","arguments","HTMLElement","VisualElement","isArrayLike","map","el","Array","prototype","klass","klassName","init","node","isString","document","getElementById","root","body","velm","mixin","batch","nodes","action","args","forEach","elm","delegate","names","props","name","partial","find","selector","descendant"],"mappings":";;;;;;;AAAAA,QACI,YACA,UACA,UACA,QACA,YACA,UACA,WACA,OACA,SACA,UACA,UACA,YACD,SAASC,EAASC,EAAOC,EAAOC,EAAKC,EAASC,EAAOC,EAAQC,EAAIC,EAAMC,EAAOC,EAAOC,GAwBpF,QAASC,GAAWC,EAAIC,GACpB,MAAO,YACH,GAAIC,GAAOC,KACPC,EAAOF,EAAKG,QACZC,EAAMN,EAAGO,MAAMN,GAAUG,GAAMI,OAAOC,EAAMC,KAAKC,YAErD,IAAIL,EAAK,CACL,GAAIA,IAAQL,EACR,MAAOC,EAEHI,aAAeM,aACfN,EAAM,GAAIO,GAAcP,GACjBlB,EAAM0B,YAAYR,KACzBA,EAAMS,EAAIL,KAAKJ,EAAK,SAASU,GACzB,MAAIA,aAAcJ,aACP,GAAIC,GAAcP,GAElBU,KAM3B,MAAOV,IA9Cf,GAAIS,GAAME,MAAMC,UAAUH,IACtBN,EAAQQ,MAAMC,UAAUT,MAExBI,EAAgBzB,EAAM+B,OACtBC,UAAW,gBAEXC,KAAQ,SAASC,GACTlC,EAAMmC,SAASD,KACfA,EAAOE,SAASC,eAAeH,IAEnCnB,KAAKE,QAAUiB,KAInBI,EAAO,GAAIb,GAAcW,SAASG,MAClCC,EAAO,SAASN,GACZ,MAAIA,GACO,GAAIT,GAAcS,GAElBI,EAmMnB,OApKAtC,GAAMyC,MAAMD,GACRE,MAAO,SAASC,EAAOC,EAAQC,GAM3B,MALAF,GAAMG,QAAQ,SAASZ,GACnB,GAAIa,GAAOb,YAAgBT,GAAiBS,EAAOM,EAAKN,EACxDa,GAAIH,GAAQzB,MAAM4B,EAAKF,KAGpB9B,MAGXuB,KAAM,GAAIb,GAAcW,SAASG,MAEjCd,cAAeA,EAEfuB,SAAU,SAASC,EAAOpC,GACtB,GAAIqC,KAEJD,GAAMH,QAAQ,SAASK,GACnBD,EAAMC,GAAQxC,EAAWE,EAAQsC,GAAOtC,KAG5CY,EAAc2B,QAAQF,MAK9BV,EAAKQ,UACD,OACA,OACA,OACA,aACA,aACA,OACA,OACD/C,GAGHuC,EAAKQ,UACD,YACA,aACD9C,GAIHsC,EAAKQ,UACD,MACA,KACA,MACA,YACA,WACD7C,GAGHqC,EAAKQ,UACD,SACA,YACD5C,GAGHoC,EAAKQ,UACD,WACA,YACA,WACA,aACA,OACA,UACA,aACA,YACA,UACA,cACA,eACA,SACA,kBACA,mBACA,YACD3C,GAEHmC,EAAKa,KAAO,SAASC,GACjB,MAAiB,SAAbA,EACOvC,KAAKuB,KAELvB,KAAKuB,KAAKiB,WAAWD,IAKpCd,EAAKQ,UACD,UACA,SACA,UACA,SACA,aACA,OACA,cACA,OACA,UACD1C,GAIHkC,EAAKQ,UACD,gBACA,mBACA,eACA,eACA,aACA,cACA,cACA,SACA,gBACA,eACA,iBACA,eACA,WACA,mBACA,eACA,iBACA,aACA,YACA,OACA,SACDzC,GAGHiC,EAAKQ,UACD,WACD9C,GAIHsC,EAAKQ,UACD,QACA,SACA,SACA,QACA,WACA,WACA,QACA,OACA,YACA,WACA,UACA,SACA,UACA,UACA,QACA,WACA,UACA,eACA,UACDvC,GAGH+B,EAAKQ,UACD,WACA,YACA,MACA,WACA,OACA,cACA,cACA,OACA,eACDtC,GACIX,EAAQyC,KAAOA","file":"../velm.js","sourcesContent":["define([\r\n    \"./skylark\",\r\n    \"./langx\",\r\n    \"./datax\",\r\n    \"./dnd\",\r\n    \"./eventer\",\r\n    \"./filer\",\r\n    \"./finder\",\r\n    \"./fx\",\r\n    \"./geom\",\r\n    \"./mover\",\r\n    \"./noder\",\r\n    \"./styler\"\r\n], function(skylark, langx, datax, dnd, eventer, filer, finder, fx, geom, mover, noder, styler) {\r\n    var map = Array.prototype.map,\r\n        slice = Array.prototype.slice;\r\n\r\n    var VisualElement = langx.klass({\r\n        klassName: \"VisualElement\",\r\n\r\n        \"init\": function(node) {\r\n            if (langx.isString(node)) {\r\n                node = document.getElementById(node);\r\n            }\r\n            this.domNode = node;\r\n        }\r\n    });\r\n\r\n    var root = new VisualElement(document.body),\r\n        velm = function(node) {\r\n            if (node) {\r\n                return new VisualElement(node);\r\n            } else {\r\n                return root;\r\n            }\r\n        };\r\n\r\n    function _delegator(fn, context) {\r\n        return function() {\r\n            var self = this,\r\n                elem = self.domNode,\r\n                ret = fn.apply(context, [elem].concat(slice.call(arguments)));\r\n\r\n            if (ret) {\r\n                if (ret === context) {\r\n                    return self;\r\n                } else {\r\n                    if (ret instanceof HTMLElement) {\r\n                        ret = new VisualElement(ret);\r\n                    } else if (langx.isArrayLike(ret)) {\r\n                        ret = map.call(ret, function(el) {\r\n                            if (el instanceof HTMLElement) {\r\n                                return new VisualElement(ret);\r\n                            } else {\r\n                                return el;\r\n                            }\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n            return ret;\r\n        };\r\n    }\r\n\r\n    langx.mixin(velm, {\r\n        batch: function(nodes, action, args) {\r\n            nodes.forEach(function(node) {\r\n                var elm = (node instanceof VisualElement) ? node : velm(node);\r\n                elm[action].apply(elm, args);\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        root: new VisualElement(document.body),\r\n\r\n        VisualElement: VisualElement,\r\n\r\n        delegate: function(names, context) {\r\n            var props = {};\r\n\r\n            names.forEach(function(name) {\r\n                props[name] = _delegator(context[name], context);\r\n            });\r\n\r\n            VisualElement.partial(props);\r\n        }\r\n    });\r\n\r\n    // from ./datax\r\n    velm.delegate([\r\n        \"attr\",\r\n        \"data\",\r\n        \"prop\",\r\n        \"removeAttr\",\r\n        \"removeData\",\r\n        \"text\",\r\n        \"val\"\r\n    ], datax);\r\n\r\n    // from ./dnd\r\n    velm.delegate([\r\n        \"draggable\",\r\n        \"droppable\"\r\n    ], dnd);\r\n\r\n\r\n    // from ./eventer\r\n    velm.delegate([\r\n        \"off\",\r\n        \"on\",\r\n        \"one\",\r\n        \"shortcuts\",\r\n        \"trigger\"\r\n    ], eventer);\r\n\r\n    // from ./filer\r\n    velm.delegate([\r\n        \"picker\",\r\n        \"dropzone\"\r\n    ], filer);\r\n\r\n    // from ./finder\r\n    velm.delegate([\r\n        \"ancestor\",\r\n        \"ancestors\",\r\n        \"children\",\r\n        \"descendant\",\r\n        \"find\",\r\n        \"findAll\",\r\n        \"firstChild\",\r\n        \"lastChild\",\r\n        \"matches\",\r\n        \"nextSibling\",\r\n        \"nextSiblings\",\r\n        \"parent\",\r\n        \"previousSibling\",\r\n        \"previousSiblings\",\r\n        \"siblings\"\r\n    ], finder);\r\n\r\n    velm.find = function(selector) {\r\n        if (selector === \"body\") {\r\n            return this.root;\r\n        } else {\r\n            return this.root.descendant(selector);\r\n        }\r\n    };\r\n\r\n    // from ./fx\r\n    velm.delegate([\r\n        \"animate\",\r\n        \"fadeIn\",\r\n        \"fadeOut\",\r\n        \"fadeTo\",\r\n        \"fadeToggle\",\r\n        \"hide\",\r\n        \"scrollToTop\",\r\n        \"show\",\r\n        \"toggle\"\r\n    ], fx);\r\n\r\n\r\n    // from ./geom\r\n    velm.delegate([\r\n        \"borderExtents\",\r\n        \"boundingPosition\",\r\n        \"boundingRect\",\r\n        \"clientHeight\",\r\n        \"clientSize\",\r\n        \"clientWidth\",\r\n        \"contentRect\",\r\n        \"height\",\r\n        \"marginExtents\",\r\n        \"offsetParent\",\r\n        \"paddingExtents\",\r\n        \"pagePosition\",\r\n        \"pageRect\",\r\n        \"relativePosition\",\r\n        \"relativeRect\",\r\n        \"scrollIntoView\",\r\n        \"scrollLeft\",\r\n        \"scrollTop\",\r\n        \"size\",\r\n        \"width\"\r\n    ], geom);\r\n\r\n    // from ./mover\r\n    velm.delegate([\r\n        \"movable\"\r\n    ], dnd);\r\n\r\n\r\n    // from ./noder\r\n    velm.delegate([\r\n        \"after\",\r\n        \"append\",\r\n        \"before\",\r\n        \"clone\",\r\n        \"contains\",\r\n        \"contents\",\r\n        \"empty\",\r\n        \"html\",\r\n        \"isChildOf\",\r\n        \"ownerDoc\",\r\n        \"prepend\",\r\n        \"remove\",\r\n        \"replace\",\r\n        \"reverse\",\r\n        \"throb\",\r\n        \"traverse\",\r\n        \"wrapper\",\r\n        \"wrapperInner\",\r\n        \"unwrap\"\r\n    ], noder);\r\n\r\n    // from ./styler\r\n    velm.delegate([\r\n        \"addClass\",\r\n        \"className\",\r\n        \"css\",\r\n        \"hasClass\",\r\n        \"hide\",\r\n        \"isInvisible\",\r\n        \"removeClass\",\r\n        \"show\",\r\n        \"toggleClass\"\r\n    ], styler);\r\n    return skylark.velm = velm;\r\n});\r\n"]}