/**
 * skylark-langx - A simple JavaScript language extension library, including class support, Evented class, Deferred class and some commonly used tool functions.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.5-beta
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./skylark"],function(t){function n(t,n,e,r){var i,o=t[n],u="around"==n;if(u){var s=e(function(){return o.advice(this,arguments)});i={remove:function(){s&&(s=t=e=null)},advice:function(t,n){return s?s.apply(t,n):o.advice(t,n)}}}else i={remove:function(){if(i.advice){var r=i.previous,o=i.next;o||r?(r?r.next=o:t[n]=o,o&&(o.previous=r)):delete t[n],t=e=i.advice=null}},id:G++,advice:e,receiveArguments:r};if(o&&!u)if("after"==n){for(;o.next&&(o=o.next););o.next=i,i.previous=o}else"before"==n&&(t[n]=i,i.next=o,o.previous=i);else t[n]=i;return i}function e(t){return function(e,r,i,o){var u,s=e[r];s&&s.target==e||(e[r]=u=function(){for(var t=G,n=arguments,e=u.before;e;)n=e.advice.apply(this,n)||n,e=e.next;if(u.around)var r=u.around.advice(this,n);for(var i=u.after;i&&i.id<t;){if(i.receiveArguments){var o=i.advice.apply(this,n);r=o===M?r:o}else r=i.advice.call(this,r,n);i=i.next}return r},s&&(u.around={advice:function(t,n){return s.apply(t,n)}}),u.target=e);var a=n(u||s,t,i,o);return i=null,a}}function r(t,n){var e;if(t===M||null===t)e=t;else if(n&&t.clone)e=t.clone();else if(v(t)){e=[];for(var i=0;i<t.length;i++)e.push(r(t[i]))}else if(j(t)){e={};for(var o in t)e[o]=r(t[o])}else e=t;return e}function i(t,n){var e=new CustomEvent(t,n);return q(e,n)}function o(t,n){var e,r,i=function(){t.apply(null,r)};return function(){r=arguments,clearTimeout(e),e=setTimeout(i,n)}}function u(t){return Q.call(t,function(t){return null!=t})}function s(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function a(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?JSON.parse(t):t):t}catch(n){return t}}function c(t,n){var e,r,i,o,u;if(t)if(e=t.length,e===o){for(r in t)if(t.hasOwnProperty(r)&&(u=t[r],n.call(u,r,u)===!1))break}else for(i=0;i<e&&(u=t[i],n.call(u,i,u)!==!1);i++);return this}function l(t){if(d(t)){for(var n=[],e=0;e<t.length;e++){var r=t[e];if(d(r))for(var i=0;i<r.length;i++)n.push(r[i]);else n.push(r)}return n}return t}function f(t,n,e,r){return m(n)?n.call(t,e,r):n}function h(t){var t=t||window.location.href,n=t.split("?"),e={};return n.length>1&&n[1].split("&").forEach(function(t){var n=t.split("=");e[n[0]]=n[1]}),e}function p(t,n){if(!n)return-1;var e;if(n.indexOf)return n.indexOf(t);for(e=n.length;e--;)if(n[e]===t)return e;return-1}function v(t){return t&&t.constructor===Array}function d(t){return!w(t)&&!E(t)&&"number"==typeof t.length}function g(t){return"boolean"==typeof t}function b(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function y(t,n){return tt(t,n)}function m(t){return"function"==it(t)}function _(t){return"object"==it(t)}function j(t){return _(t)&&!A(t)&&Object.getPrototypeOf(t)==Object.prototype}function w(t){return"string"==typeof t}function A(t){return t&&t==t.window}function O(t){return"undefined"!=typeof t}function E(t){return t&&t instanceof Node}function x(t){return"number"==typeof t}function T(t){if(t){var n=location.protocol+"//"+location.hostname;return location.port&&(n+=":"+location.port),t.startsWith(n)}}function S(t){var n;for(n in t)if(null!==t[n])return!1;return!0}function k(t,n,e){return d(t)?(e||[]).concat(Array.prototype.slice.call(t,n||0)):[t]}function N(t,n){var e,r,i,o=[];if(d(t))for(r=0;r<t.length;r++)e=n.call(t[r],t[r],r),null!=e&&o.push(e);else for(i in t)e=n.call(t[i],t[i],i),null!=e&&o.push(e);return l(o)}function P(t){return requestAnimationFrame(t),this}function C(t,n){var e=2 in arguments&&H.call(arguments,2);if(m(t)){var r=function(){return t.apply(n,e?e.concat(H.call(arguments)):arguments)};return r}if(w(n))return e?(e.unshift(t[n],t),C.apply(null,e)):C(t[n],t);throw new TypeError("expected function")}function F(t){return parseFloat(t)||0}function D(t){return null==t?"":String.prototype.trim.call(t)}function L(t,n){if(v(t)){var e=t.indexOf(n);e!=-1&&t.splice(e,1)}else if(j(t))for(var r in t)if(t[r]==n){delete t[r];break}return this}function z(t,n,e,r){for(var i in n)n.hasOwnProperty(i)&&(r&&t[i]!==M||(e&&(j(n[i])||v(n[i]))?(j(n[i])&&!j(t[i])&&(t[i]={}),v(n[i])&&!v(t[i])&&(t[i]=[]),z(t[i],n[i],e,r)):n[i]!==M&&(t[i]=n[i])));return t}function U(t){var n=H.call(arguments,0);return target=n.shift(),deep=!1,g(n[n.length-1])&&(deep=n.pop()),{target:target,sources:n,deep:deep}}function R(){var t=U.apply(this,arguments);return t.sources.forEach(function(n){z(t.target,n,t.deep,!1)}),t.target}function $(t,n,e){v(n)||(n=[n]);var r=n.length;if(!r)return m(e)?e.call(t):e;for(var i=0;i<r;i++){var o=null==t?void 0:t[n[i]];void 0===o&&(o=e,i=r),t=m(o)?o.call(t):o}return t}function q(){var t=U.apply(this,arguments);return t.sources.forEach(function(n){z(t.target,n,t.deep,!0)}),t.target}function B(t,n,e,r){function i(t,n){if(t.match(/\./)){var e,r=function(t,n){var i=t.pop();return i?n[i]?r(t,e=n[i]):null:e};return r(t.split(".").reverse(),n)}return n[t]}return r=r||window,e=e?C(r,e):function(t){return t},t.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(t,o,u){var s=i(o,n);return u&&(s=i(u,r).call(r,s,o)),e(s,o).toString()})}function J(t){return t._uid||(t._uid=ut++)}function V(t){return Q.call(t,function(n,e){return t.indexOf(n)==e})}function Z(t){var n=++st+"";return t?t+n:n}function I(){return I}var M,W={}.toString,H=(Array.prototype.concat,Array.prototype.indexOf,Array.prototype.slice),Q=Array.prototype.filter,G=0,K=function(){function t(t,n,e){var r=t.prototype,i=t.superclass.prototype,o=e&&e.noOverrided;for(var u in n)"constructor"!==u&&(r[u]="function"!=typeof n[u]||n[u]._constructor||o||"function"!=typeof i[u]?n[u]:function(t,n,e){return function(){var t=this.overrided;this.overrided=e;var r=n.apply(this,arguments);return this.overrided=t,r}}(u,n[u],i[u]));return t}return function n(e,r,i){var o=e.constructor;o===Object&&(o=function(){this.init&&this.init.apply(this,arguments)});var u=e.klassName||"",s=new Function("return function "+u+"() {var inst = this, ctor = arguments.callee;if (!(inst instanceof ctor)) {inst = Object.create(ctor.prototype);}ctor._constructor.apply(inst, arguments);return inst;}")();return s._constructor=o,r=r||Object,s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.superclass=r,s.__proto__=r,s.partial||(s.partial=function(n,e){return t(this,n,e)}),s.inherit||(s.inherit=function(t,e){return n(t,this,e)}),s.partial(e,i),s}}(),X=function(){function t(){}return function(n,e){t.prototype=n;var r=new t;return t.prototype=null,e&&R(r,e),r}}(),Y=function(){this.promise=new Promise(function(t,n){this._resolve=t,this._reject=n}.bind(this)),this.resolve=Y.prototype.resolve.bind(this),this.reject=Y.prototype.reject.bind(this)};Y.prototype.resolve=function(t){return this._resolve.call(this.promise,t),this},Y.prototype.reject=function(t){return this._reject.call(this.promise,t),this},Y.prototype.then=function(t,n,e){return this.promise.then(t,n,e)},Y.all=function(t){return Promise.all(t)},Y.first=function(t){return Promise.race(t)},Y.when=function(t,n,e,r){var i=t&&"function"==typeof t.then,o=i&&t instanceof Promise;if(!i)return arguments.length>1?n?n(t):t:(new Y).resolve(t);if(!o){var u=new Y(t.cancel);t.then(u.resolve,u.reject,u.progress),t=u.promise}return n||e||r?t.then(n,e,r):t},Y.reject=function(t){var n=new Y;return n.reject(t),n.promise},Y.resolve=function(t){var n=new Y;return n.resolve(t),n.promise},Y.immediate=Y.resolve;var tt,nt,et=K({on:function(t,n,e,r,i,o){var u=this,s=this._hub||(this._hub={});return j(t)?(i=r,c(t,function(t,r){u.on(t,n,e,r,i,o)}),this):(w(n)||m(r)||(i=r,r=e,e=n,n=M),m(e)&&(i=r,r=e,e=null),w(t)&&(t=t.split(/\s/)),t.forEach(function(t){(s[t]||(s[t]=[])).push({fn:r,selector:n,data:e,ctx:i,one:o})}),this)},one:function(t,n,e,r,i){return this.on(t,n,e,r,i,1)},trigger:function(t){if(!this._hub)return this;var n=this;w(t)&&(t=new CustomEvent(t)),t.target=this;var e=H.call(arguments,1);return e=O(e)?[t].concat(e):[t],[t.type||t.name,"all"].forEach(function(r){var i=n._hub[r];if(i){for(var o=i.length,s=!1,a=0;a<o;a++){var c=i[a];t.data?c.data&&(t.data=R({},c.data,t.data)):t.data=c.data||null,c.fn.apply(c.ctx,e),c.one&&(i[a]=null,s=!0)}s&&(n._hub[r]=u(i))}}),this},listened:function(t){var n=(this._hub||(this._events={}))[t]||[];return n.length>0},listenTo:function(t,n,e,r){if(!t)return this;w(e)&&(e=this[e]),r?t.one(n,e,this):t.on(n,e,this);for(var i,o=this._listeningTo||(this._listeningTo=[]),u=0;u<o.length;u++)if(o[u].obj==t){i=o[u];break}i||o.push(i={obj:t,events:{}});var s=i.events,a=s[n]=s[n]||[];return a.indexOf(e)==-1&&a.push(e),this},listenToOnce:function(t,n,e){return this.listenTo(t,n,e,1)},off:function(t,n){var e=this._hub||(this._hub={});return w(t)&&(t=t.split(/\s/)),t.forEach(function(t){var r=e[t],i=[];if(r&&n)for(var o=0,u=r.length;o<u;o++)r[o].fn!==n&&r[o].fn._!==n&&i.push(r[o]);i.length?e[t]=i:delete e[t]}),this},unlistenTo:function(t,n,e){var r=this._listeningTo;if(!r)return this;for(var i=0;i<r.length;i++){var o=r[i];if(!t||t==o.obj){var s=o.events;for(var a in s)if(!n||n==a){listeningEvent=s[a];for(var c=0;c<listeningEvent.length;c++)e&&e!=listeningEvent[i]||(o.obj.off(a,listeningEvent[i],this),listeningEvent[i]=null);listeningEvent=s[a]=u(listeningEvent),S(listeningEvent)&&(s[a]=null)}S(s)&&(r[i]=null)}}return r=this._listeningTo=u(r),S(r)&&(this._listeningTo=null),this}}),rt=(function(){var t;return function(n){return t||(t=document.createElement("a")),t.href=n,t.href}}(),"undefined"!=typeof Symbol?Symbol.prototype:null);tt=function(t,n,e,r){if(t===n)return 0!==t||1/t===1/n;if(null==t||null==n)return!1;if(t!==t)return n!==n;var i=typeof t;return("function"===i||"object"===i||"object"==typeof n)&&nt(t,n,e,r)},nt=function(t,n,e,r){var i=W.call(t);if(i!==W.call(n))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!==+t?+n!==+n:0===+t?1/+t===1/n:+t===+n;case"[object Date]":case"[object Boolean]":return+t===+n;case"[object Symbol]":return rt.valueOf.call(t)===rt.valueOf.call(n)}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof n)return!1;var u=t.constructor,s=n.constructor;if(u!==s&&!(m(u)&&u instanceof u&&m(s)&&s instanceof s)&&"constructor"in t&&"constructor"in n)return!1}e=e||[],r=r||[];for(var a=e.length;a--;)if(e[a]===t)return r[a]===n;if(e.push(t),r.push(n),o){if(a=t.length,a!==n.length)return!1;for(;a--;)if(!tt(t[a],n[a],e,r))return!1}else{var c,l=Object.keys(t);if(a=l.length,Object.keys(n).length!==a)return!1;for(;a--;)if(c=l[a],n[c]===M||!tt(t[c],n[c],e,r))return!1}return e.pop(),r.pop(),!0};var it=function(){var t={};return c("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(n,e){t["[object "+e+"]"]=e.toLowerCase()}),function(n){return null==n?String(n):t[W.call(n)]||"object"}}(),ot=et.inherit({init:function(t,n){var e=t||{};n||(n={}),this.cid=Z(this.cidPrefix),this.attributes={},n.collection&&(this.collection=n.collection),n.parse&&(e=this.parse(e,n)||{});var r=$(this,"defaults");e=R({},r,e),this.set(e,n),this.changed={}},changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",toJSON:function(t){return r(this.attributes)},get:function(t){return this.attributes[t]},has:function(t){return null!=this.get(t)},set:function(t,n,e){if(null==t)return this;var i;if("object"==typeof t?(i=t,e=n):(i={})[t]=n,e||(e={}),!this._validate(i,e))return!1;var o=e.unset,u=e.silent,s=[],a=this._changing;this._changing=!0,a||(this._previousAttributes=r(this.attributes),this.changed={});var c=this.attributes,l=this.changed,f=this._previousAttributes;for(var h in i)n=i[h],y(c[h],n)||s.push(h),y(f[h],n)?delete l[h]:l[h]=n,o?delete c[h]:c[h]=n;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!u){s.length&&(this._pending=e);for(var p=0;p<s.length;p++)this.trigger("change:"+s[p],this,c[s[p]],e)}if(a)return this;if(!u)for(;this._pending;)e=this._pending,this._pending=!1,this.trigger("change",this,e);return this._pending=!1,this._changing=!1,this},unset:function(t,n){return this.set(t,void 0,R({},n,{unset:!0}))},clear:function(t){var n={};for(var e in this.attributes)n[e]=void 0;return this.set(n,R({},t,{unset:!0}))},hasChanged:function(t){return null==t?!S(this.changed):this.changed[t]!==M},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&r(this.changed);var n=this._changing?this._previousAttributes:this.attributes,e={};for(var i in t){var o=t[i];y(n[i],o)||(e[i]=o)}return!S(e)&&e},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return r(this._previousAttributes)},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},R({},t,{validate:!0}))},_validate:function(t,n){if(!n.validate||!this.validate)return!0;t=R({},this.attributes,t);var e=this.validationError=this.validate(t,n)||null;return!e||(this.trigger("invalid",this,e,R(n,{validationError:e})),!1)}}),ut=1,st=0;return R(I,{after:e("after"),around:e("around"),before:e("before"),camelCase:function(t){return t.replace(/-([\da-z])/g,function(t){return t.toUpperCase().replace("-","")})},clone:r,compact:u,createEvent:i,dasherize:s,debounce:o,delegate:X,Deferred:Y,Evented:et,deserializeValue:a,each:c,flatten:l,funcArg:f,getQueryParams:h,inArray:p,isArray:v,isArrayLike:d,isBoolean:g,isDefined:function(t){return t!==M},isDocument:b,isEmptyObject:S,isEqual:y,isFunction:m,isHtmlNode:E,isObject:_,isPlainObject:j,isNumber:x,isString:w,isSameOrigin:T,isWindow:A,klass:function(t,n,e){return K(t,n,e)},lowerFirst:function(t){return t.charAt(0).toLowerCase()+t.slice(1)},makeArray:k,map:N,mixin:R,nextTick:P,proxy:C,removeItem:L,result:$,returnTrue:function(){return!0},returnFalse:function(){return!1},safeMixin:q,serializeValue:function(t){return JSON.stringify(t)},Stateful:ot,substitute:B,toPixel:F,trim:D,type:it,uid:J,uniq:V,uniqueId:Z,upperFirst:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},URL:window.URL||window.webkitURL}),t.langx=I});
//# sourceMappingURL=sourcemaps/langx.js.map
