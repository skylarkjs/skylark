/**
 * skylark-langx - A simple JavaScript language extension library, including class support, Evented class, Deferred class and some commonly used tool functions.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.5-beta
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./skylark"],function(t){function r(t,r){return function(n){var e=arguments.length;if(r&&(n=Object(n)),e<2||null==n)return n;for(var i=1;i<e;i++)for(var o=arguments[i],u=t(o),s=u.length,a=0;a<s;a++){var c=u[a];r&&void 0!==n[c]||(n[c]=o[c])}return n}}function n(t,r,n,e){var i,o=t[r],u="around"==r;if(u){var s=n(function(){return o.advice(this,arguments)});i={remove:function(){s&&(s=t=n=null)},advice:function(t,r){return s?s.apply(t,r):o.advice(t,r)}}}else i={remove:function(){if(i.advice){var e=i.previous,o=i.next;o||e?(e?e.next=o:t[r]=o,o&&(o.previous=e)):delete t[r],t=n=i.advice=null}},id:at++,advice:n,receiveArguments:e};if(o&&!u)if("after"==r){for(;o.next&&(o=o.next););o.next=i,i.previous=o}else"before"==r&&(t[r]=i,i.next=o,o.previous=i);else t[r]=i;return i}function e(t){return function(r,e,i,o){var u,s=r[e];s&&s.target==r||(r[e]=u=function(){for(var t=at,r=arguments,n=u.before;n;)r=n.advice.apply(this,r)||r,n=n.next;if(u.around)var e=u.around.advice(this,r);for(var i=u.after;i&&i.id<t;){if(i.receiveArguments){var o=i.advice.apply(this,r);e=o===st?e:o}else e=i.advice.call(this,e,r);i=i.next}return e},s&&(u.around={advice:function(t,r){return s.apply(t,r)}}),u.target=r);var a=n(u||s,t,i,o);return i=null,a}}function i(t){if(!E(t))return[];var r=[];for(var n in t)r.push(n);return r}function o(t,r){var n=new CustomEvent(t,r);return W(n,r)}function u(t,r){var n,e,i=function(){t.apply(null,e)};return function(){e=arguments,clearTimeout(n),n=setTimeout(i,r)}}function s(t){for(var r=_.keys(t),n=r.length,e=Array(n),i=0;i<n;i++)e[i]=t[r[i]];return e}function a(t,r){var n;if(t===st||null===t)n=t;else if(r&&t.clone)n=t.clone();else if(b(t)){n=[];for(var e=0;e<t.length;e++)n.push(a(t[e]))}else if(x(t)){n={};for(var i in t)n[i]=a(t[i])}else n=t;return n}function c(t){return et.call(t,function(t){return null!=t})}function l(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function f(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?JSON.parse(t):t):t}catch(r){return t}}function h(t,r){var n,e,i,o,u;if(t)if(n=t.length,n===o){for(e in t)if(t.hasOwnProperty(e)&&(u=t[e],r.call(u,e,u)===!1))break}else for(i=0;i<n&&(u=t[i],r.call(u,i,u)!==!1);i++);return this}function p(t){if(m(t)){for(var r=[],n=0;n<t.length;n++){var e=t[n];if(m(e))for(var i=0;i<e.length;i++)r.push(e[i]);else r.push(e)}return r}return t}function v(t,r,n,e){return O(r)?r.call(t,n,e):r}function d(t){var t=t||window.location.href,r=t.split("?"),n={};return r.length>1&&r[1].split("&").forEach(function(t){var r=t.split("=");n[r[0]]=r[1]}),n}function g(t,r){if(!b(r))return null!=t&&it.call(t,r);for(var n=r.length,e=0;e<n;e++){var i=r[e];if(null==t||!it.call(t,i))return!1;t=t[i]}return!!n}function y(t,r){if(!r)return-1;var n;if(r.indexOf)return r.indexOf(t);for(n=r.length;n--;)if(r[n]===t)return n;return-1}function b(t){return t&&t.constructor===Array}function m(t){return!S(t)&&!k(t)&&"number"==typeof t.length}function j(t){return"boolean"==typeof t}function w(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function A(t,r){return Y(t,r)}function O(t){return"function"==ft(t)}function E(t){return"object"==ft(t)}function x(t){return E(t)&&!P(t)&&Object.getPrototypeOf(t)==Object.prototype}function S(t){return"string"==typeof t}function P(t){return t&&t==t.window}function T(t){return"undefined"!=typeof t}function k(t){return t&&t instanceof Node}function N(t){return"number"==typeof t}function C(t){if(t){var r=location.protocol+"//"+location.hostname;return location.port&&(r+=":"+location.port),t.startsWith(r)}}function F(t){var r;for(r in t)if(null!==t[r])return!1;return!0}function D(t,r){var n=n(r),e=n.length;if(null==t)return!e;for(var i=Object(t),o=0;o<e;o++){var u=n[o];if(r[u]!==i[u]||!(u in i))return!1}return!0}function L(t){if(E(t))return[];var r=[];for(var n in t)g(t,n)&&r.push(n);return r}function z(t,r,n){return m(t)?(n||[]).concat(Array.prototype.slice.call(t,r||0)):[t]}function U(t,r){var n,e,i,o=[];if(m(t))for(e=0;e<t.length;e++)n=r.call(t[e],t[e],e),null!=n&&o.push(n);else for(i in t)n=r.call(t[i],t[i],i),null!=n&&o.push(n);return p(o)}function q(t){return requestAnimationFrame?requestAnimationFrame(t):setTimeoutout(t),this}function R(t,r){var n=2 in arguments&&nt.call(arguments,2);if(O(t)){var e=function(){return t.apply(r,n?n.concat(nt.call(arguments)):arguments)};return e}if(S(r))return n?(n.unshift(t[r],t),R.apply(null,n)):R(t[r],t);throw new TypeError("expected function")}function $(t){return parseFloat(t)||0}function B(t){return null==t?"":String.prototype.trim.call(t)}function J(t,r){if(b(t)){var n=t.indexOf(r);n!=-1&&t.splice(n,1)}else if(x(t))for(var e in t)if(t[e]==r){delete t[e];break}return this}function M(t,r,n,e){for(var i in r)r.hasOwnProperty(i)&&(e&&t[i]!==st||(n&&(x(r[i])||b(r[i]))?(x(r[i])&&!x(t[i])&&(t[i]={}),b(r[i])&&!b(t[i])&&(t[i]=[]),M(t[i],r[i],n,e)):r[i]!==st&&(t[i]=r[i])));return t}function V(t){var r=nt.call(arguments,0);return target=r.shift(),deep=!1,j(r[r.length-1])&&(deep=r.pop()),{target:target,sources:r,deep:deep}}function Z(){var t=V.apply(this,arguments);return t.sources.forEach(function(r){M(t.target,r,t.deep,!1)}),t.target}function I(t,r,n){b(r)||(r=[r]);var e=r.length;if(!e)return O(n)?n.call(t):n;for(var i=0;i<e;i++){var o=null==t?void 0:t[r[i]];void 0===o&&(o=n,i=e),t=O(o)?o.call(t):o}return t}function W(){var t=V.apply(this,arguments);return t.sources.forEach(function(r){M(t.target,r,t.deep,!0)}),t.target}function H(t,r,n,e){function i(t,r){if(t.match(/\./)){var n,e=function(t,r){var i=t.pop();return i?r[i]?e(t,n=r[i]):null:n};return e(t.split(".").reverse(),r)}return r[t]}return e=e||window,n=n?R(e,n):function(t){return t},t.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(t,o,u){var s=i(o,r);return u&&(s=i(u,e).call(e,s,o)),n(s,o).toString()})}function K(t){return t._uid||(t._uid=ht++)}function Q(t){return et.call(t,function(r,n){return t.indexOf(r)==n})}function G(t){var r=++pt+"";return t?t+r:r}function X(){return X}var Y,tt,rt={}.toString,nt=(Array.prototype.concat,Array.prototype.indexOf,Array.prototype.slice),et=Array.prototype.filter,it=Object.prototype.hasOwnProperty,ot=Symbol?Symbol():"__pglisteners",ut="undefined"!=typeof Symbol?Symbol.prototype:null;Y=function(t,r,n,e){if(t===r)return 0!==t||1/t===1/r;if(null==t||null==r)return!1;if(t!==t)return r!==r;var i=typeof t;return("function"===i||"object"===i||"object"==typeof r)&&tt(t,r,n,e)},tt=function(t,r,n,e){var i=rt.call(t);if(i!==rt.call(r))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+r;case"[object Number]":return+t!==+t?+r!==+r:0===+t?1/+t===1/r:+t===+r;case"[object Date]":case"[object Boolean]":return+t===+r;case"[object Symbol]":return ut.valueOf.call(t)===ut.valueOf.call(r)}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof r)return!1;var u=t.constructor,s=r.constructor;if(u!==s&&!(O(u)&&u instanceof u&&O(s)&&s instanceof s)&&"constructor"in t&&"constructor"in r)return!1}n=n||[],e=e||[];for(var a=n.length;a--;)if(n[a]===t)return e[a]===r;if(n.push(t),e.push(r),o){if(a=t.length,a!==r.length)return!1;for(;a--;)if(!Y(t[a],r[a],n,e))return!1}else{var c,l=Object.keys(t);if(a=l.length,Object.keys(r).length!==a)return!1;for(;a--;)if(c=l[a],r[c]===st||!Y(t[c],r[c],n,e))return!1}return n.pop(),e.pop(),!0};var st,at=0,ct=function(){function t(t,r,n){var e=t.prototype,i=t.superclass.prototype,o=n&&n.noOverrided;for(var u in r)"constructor"!==u&&(e[u]="function"!=typeof r[u]||r[u]._constructor||o||"function"!=typeof i[u]?r[u]:function(t,r,n){return function(){var t=this.overrided;this.overrided=n;var e=r.apply(this,arguments);return this.overrided=t,e}}(u,r[u],i[u]));return t}return function r(n,e,i){var o=n.constructor;o===Object&&(o=function(){if(this.init)return this.init.apply(this,arguments)});var u=n.klassName||"",s=new Function("return function "+u+"() {var inst = this, ctor = arguments.callee;if (!(inst instanceof ctor)) {inst = Object.create(ctor.prototype);}return ctor._constructor.apply(inst, arguments) || inst;}")();return s._constructor=o,e=e||Object,s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.superclass=e,s.__proto__=e,s.partial||(s.partial=function(r,n){return t(this,r,n)}),s.inherit||(s.inherit=function(t,n){return r(t,this,n)}),s.partial(n,i),s}}(),lt=function(){function t(){}return function(r,n){t.prototype=r;var e=new t;return t.prototype=null,n&&Z(e,n),e}}(),ft=(function(){var t;return function(r){return t||(t=document.createElement("a")),t.href=r,t.href}}(),function(){var t={};return h("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(r,n){t["[object "+n+"]"]=n.toLowerCase()}),function(r){return null==r?String(r):t[rt.call(r)]||"object"}}()),ht=1,pt=0,vt=function(){var t=this,r=this.promise=new Promise(function(r,n){t._resolve=r,t._reject=n});Z(r,{then:function(t,r,n){return n&&this.progress(n),Promise.prototype.then.call(this,t,r)},done:function(t){return Promise.prototype.then.call(this,t)},fail:function(t){return Promise.prototype["catch"].call(this,t)},progress:function(r){return t[ot].push(r),this}}),this[ot]=[],this.resolve=vt.prototype.resolve.bind(this),this.reject=vt.prototype.reject.bind(this),this.progress=vt.prototype.progress.bind(this)};vt.prototype.resolve=function(t){return this._resolve.call(this.promise,t),this},vt.prototype.progress=function(t){try{return this[ot].forEach(function(r){return r(t)})}catch(r){this.reject(r)}return this},vt.prototype.reject=function(t){return this._reject.call(this.promise,t),this},vt.prototype.then=function(t,r,n){return this.promise.then(t,r,n)},vt.all=function(t){return Promise.all(t)},vt.first=function(t){return Promise.race(t)},vt.when=function(t,r,n,e){var i=t&&"function"==typeof t.then,o=i&&t instanceof Promise;if(!i)return arguments.length>1?r?r(t):t:(new vt).resolve(t);if(!o){var u=new vt(t.cancel);t.then(u.resolve,u.reject,u.progress),t=u.promise}return r||n||e?t.then(r,n,e):t},vt.reject=function(t){var r=new vt;return r.reject(t),r.promise},vt.resolve=function(t){var r=new vt;return r.resolve(t),r.promise},vt.immediate=vt.resolve;var dt=ct({on:function(t,r,n,e,i,o){var u=this,s=this._hub||(this._hub={});return x(t)?(i=e,h(t,function(t,e){u.on(t,r,n,e,i,o)}),this):(S(r)||O(e)||(i=e,e=n,n=r,r=st),O(n)&&(i=e,e=n,n=null),S(t)&&(t=t.split(/\s/)),t.forEach(function(t){(s[t]||(s[t]=[])).push({fn:e,selector:r,data:n,ctx:i,one:o})}),this)},one:function(t,r,n,e,i){return this.on(t,r,n,e,i,1)},trigger:function(t){if(!this._hub)return this;var r=this;S(t)&&(t=new CustomEvent(t)),t.target=this;var n=nt.call(arguments,1);return n=T(n)?[t].concat(n):[t],[t.type||t.name,"all"].forEach(function(e){var i=r._hub[e];if(i){for(var o=i.length,u=!1,s=0;s<o;s++){var a=i[s];t.data?a.data&&(t.data=Z({},a.data,t.data)):t.data=a.data||null,a.fn.apply(a.ctx,n),a.one&&(i[s]=null,u=!0)}u&&(r._hub[e]=c(i))}}),this},listened:function(t){var r=(this._hub||(this._events={}))[t]||[];return r.length>0},listenTo:function(t,r,n,e){if(!t)return this;S(n)&&(n=this[n]),e?t.one(r,n,this):t.on(r,n,this);for(var i,o=this._listeningTo||(this._listeningTo=[]),u=0;u<o.length;u++)if(o[u].obj==t){i=o[u];break}i||o.push(i={obj:t,events:{}});var s=i.events,a=s[r]=s[r]||[];return a.indexOf(n)==-1&&a.push(n),this},listenToOnce:function(t,r,n){return this.listenTo(t,r,n,1)},off:function(t,r){var n=this._hub||(this._hub={});return S(t)&&(t=t.split(/\s/)),t.forEach(function(t){var e=n[t],i=[];if(e&&r)for(var o=0,u=e.length;o<u;o++)e[o].fn!==r&&e[o].fn._!==r&&i.push(e[o]);i.length?n[t]=i:delete n[t]}),this},unlistenTo:function(t,r,n){var e=this._listeningTo;if(!e)return this;for(var i=0;i<e.length;i++){var o=e[i];if(!t||t==o.obj){var u=o.events;for(var s in u)if(!r||r==s){listeningEvent=u[s];for(var a=0;a<listeningEvent.length;a++)n&&n!=listeningEvent[i]||(o.obj.off(s,listeningEvent[i],this),listeningEvent[i]=null);listeningEvent=u[s]=c(listeningEvent),F(listeningEvent)&&(u[s]=null)}F(u)&&(e[i]=null)}}return e=this._listeningTo=c(e),F(e)&&(this._listeningTo=null),this}}),gt=dt.inherit({init:function(t,r){var n=t||{};r||(r={}),this.cid=G(this.cidPrefix),this.attributes={},r.collection&&(this.collection=r.collection),r.parse&&(n=this.parse(n,r)||{});var e=I(this,"defaults");n=Z({},e,n),this.set(n,r),this.changed={}},changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",toJSON:function(t){return a(this.attributes)},get:function(t){return this.attributes[t]},has:function(t){return null!=this.get(t)},set:function(t,r,n){if(null==t)return this;var e;if("object"==typeof t?(e=t,n=r):(e={})[t]=r,n||(n={}),!this._validate(e,n))return!1;var i=n.unset,o=n.silent,u=[],s=this._changing;this._changing=!0,s||(this._previousAttributes=a(this.attributes),this.changed={});var c=this.attributes,l=this.changed,f=this._previousAttributes;for(var h in e)r=e[h],A(c[h],r)||u.push(h),A(f[h],r)?delete l[h]:l[h]=r,i?delete c[h]:c[h]=r;if(this.idAttribute in e&&(this.id=this.get(this.idAttribute)),!o){u.length&&(this._pending=n);for(var p=0;p<u.length;p++)this.trigger("change:"+u[p],this,c[u[p]],n)}if(s)return this;if(!o)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,r){return this.set(t,void 0,Z({},r,{unset:!0}))},clear:function(t){var r={};for(var n in this.attributes)r[n]=void 0;return this.set(r,Z({},t,{unset:!0}))},hasChanged:function(t){return null==t?!F(this.changed):this.changed[t]!==st},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&a(this.changed);var r=this._changing?this._previousAttributes:this.attributes,n={};for(var e in t){var i=t[e];A(r[e],i)||(n[e]=i)}return!F(n)&&n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return a(this._previousAttributes)},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},Z({},t,{validate:!0}))},_validate:function(t,r){if(!r.validate||!this.validate)return!0;t=Z({},this.attributes,t);var n=this.validationError=this.validate(t,r)||null;return!n||(this.trigger("invalid",this,n,Z(r,{validationError:n})),!1)}});return Z(X,{after:e("after"),allKeys:i,around:e("around"),before:e("before"),camelCase:function(t){return t.replace(/-([\da-z])/g,function(t){return t.toUpperCase().replace("-","")})},clone:a,compact:c,createEvent:o,dasherize:l,debounce:u,defaults:r(i,!0),delegate:lt,Deferred:vt,Evented:dt,defer:q,deserializeValue:f,each:h,flatten:p,funcArg:v,getQueryParams:d,has:g,inArray:y,isArray:b,isArrayLike:m,isBoolean:j,isDefined:function(t){return t!==st},isDocument:w,isEmptyObject:F,isEqual:A,isFunction:O,isHtmlNode:k,isMatch:D,isNumber:N,isObject:E,isPlainObject:x,isString:S,isSameOrigin:C,isWindow:P,keys:L,klass:function(t,r,n){return ct(t,r,n)},lowerFirst:function(t){return t.charAt(0).toLowerCase()+t.slice(1)},makeArray:z,map:U,mixin:Z,proxy:R,removeItem:J,result:I,returnTrue:function(){return!0},returnFalse:function(){return!1},safeMixin:W,serializeValue:function(t){return JSON.stringify(t)},Stateful:gt,substitute:H,toPixel:$,trim:B,type:ft,uid:K,uniq:Q,uniqueId:G,upperFirst:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},URL:"undefined"!=typeof window?window.URL||window.webkitURL:null,values:s}),t.langx=X});
//# sourceMappingURL=sourcemaps/langx.js.map
