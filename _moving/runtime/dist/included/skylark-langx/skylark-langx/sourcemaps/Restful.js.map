{"version":3,"sources":["Restful.js"],"names":["define","Evented","objects","strings","Xhr","mixin","substitute","Restful","inherit","klassName","idAttribute","getBaseUrl","args","baseEndpoint","this","baseUrl","server","basePath","undefined","_head","_get","get","_post","verb","url","post","_put","put","_delete","del","_patch","patch","query","params","retrieve","create","update","delete","init"],"mappings":";;;;;;;AAAAA,QACI,YACA,YACA,YACA,SACF,SAASC,EAAQC,EAAQC,EAAQC,GAC/B,GAAIC,GAAQH,EAAQG,MAChBC,EAAaH,EAAQG,WAErBC,EAAUN,EAAQO,SAClBC,UAAc,UAEdC,YAAe,KAEfC,WAAa,SAASC,GAElB,GAAIC,GAAeP,EAAWQ,KAAKD,aAAaD,GAC5CG,EAAUD,KAAKE,OAASF,KAAKG,SAAWJ,CAI5C,OAH6BK,UAAzBN,EAAKE,KAAKJ,eACVK,EAAUA,EAAU,IAAMH,EAAKE,KAAKJ,cAEjCK,GAEXI,MAAQ,SAASP,KAQjBQ,KAAO,SAASR,GAOZ,MAAOR,GAAIiB,IAAIP,KAAKH,WAAWC,GAAMA,IAEzCU,MAAS,SAASV,EAAKW,GASnB,GAAIC,GAAMV,KAAKH,WAAWC,EAI1B,OAHIW,KACAC,EAAMA,EAAM,IAAMD,GAEfnB,EAAIqB,KAAKD,EAAKZ,IAGzBc,KAAQ,SAASd,EAAKW,GASlB,GAAIC,GAAMV,KAAKH,WAAWC,EAI1B,OAHIW,KACAC,EAAMA,EAAM,IAAMD,GAEfnB,EAAIuB,IAAIH,EAAKZ,IAGxBgB,QAAU,SAAShB,GASf,GAAIY,GAAMV,KAAKH,WAAWC,EAC1B,OAAOR,GAAIyB,IAAIL,IAGnBM,OAAS,SAASlB,GAQd,GAAIY,GAAMV,KAAKH,WAAWC,EAC1B,OAAOR,GAAI2B,MAAMP,EAAKZ,IAE1BoB,MAAO,SAASC,GAEZ,MAAOnB,MAAKQ,MAAMW,IAGtBC,SAAU,SAASD,GACf,MAAOnB,MAAKM,KAAKa,IAGrBE,OAAQ,SAASF,GACb,MAAOnB,MAAKQ,MAAMW,IAGtBG,OAAQ,SAASH,GACb,MAAOnB,MAAKY,KAAKO,IAGrBI,SAAQ,SAASJ,GAEb,MAAOnB,MAAKc,QAAQK,IAGxBF,MAAO,SAASE,GAEZ,MAAOnB,MAAKgB,OAAOG,IAEvBK,KAAM,SAASL,GACX5B,EAAMS,KAAKmB,KAKnB,OAAO1B","file":"../Restful.js","sourcesContent":["define([\r\n    \"./Evented\",\r\n    \"./objects\",\r\n    \"./strings\",\r\n    \"./Xhr\"\r\n],function(Evented,objects,strings,Xhr){\r\n    var mixin = objects.mixin,\r\n        substitute = strings.substitute;\r\n\r\n    var Restful = Evented.inherit({\r\n        \"klassName\" : \"Restful\",\r\n\r\n        \"idAttribute\": \"id\",\r\n        \r\n        getBaseUrl : function(args) {\r\n            //$$baseEndpoint : \"/files/${fileId}/comments\",\r\n            var baseEndpoint = substitute(this.baseEndpoint,args),\r\n                baseUrl = this.server + this.basePath + baseEndpoint;\r\n            if (args[this.idAttribute]!==undefined) {\r\n                baseUrl = baseUrl + \"/\" + args[this.idAttribute]; \r\n            }\r\n            return baseUrl;\r\n        },\r\n        _head : function(args) {\r\n            //get resource metadata .\r\n            //args : id and other info for the resource ,ex\r\n            //{\r\n            //  \"id\" : 234,  // the own id, required\r\n            //  \"fileId\"   : 2 // the parent resource id, option by resource\r\n            //}\r\n        },\r\n        _get : function(args) {\r\n            //get resource ,one or list .\r\n            //args : id and other info for the resource ,ex\r\n            //{\r\n            //  \"id\" : 234,  // the own id, null if list\r\n            //  \"fileId\"   : 2 // the parent resource id, option by resource\r\n            //}\r\n            return Xhr.get(this.getBaseUrl(args),args);\r\n        },\r\n        _post  : function(args,verb) {\r\n            //create or move resource .\r\n            //args : id and other info for the resource ,ex\r\n            //{\r\n            //  \"id\" : 234,  // the own id, required\r\n            //  \"data\" : body // the own data,required\r\n            //  \"fileId\"   : 2 // the parent resource id, option by resource\r\n            //}\r\n            //verb : the verb ,ex: copy,touch,trash,untrash,watch\r\n            var url = this.getBaseUrl(args);\r\n            if (verb) {\r\n                url = url + \"/\" + verb;\r\n            }\r\n            return Xhr.post(url, args);\r\n        },\r\n\r\n        _put  : function(args,verb) {\r\n            //update resource .\r\n            //args : id and other info for the resource ,ex\r\n            //{\r\n            //  \"id\" : 234,  // the own id, required\r\n            //  \"data\" : body // the own data,required\r\n            //  \"fileId\"   : 2 // the parent resource id, option by resource\r\n            //}\r\n            //verb : the verb ,ex: copy,touch,trash,untrash,watch\r\n            var url = this.getBaseUrl(args);\r\n            if (verb) {\r\n                url = url + \"/\" + verb;\r\n            }\r\n            return Xhr.put(url, args);\r\n        },\r\n\r\n        _delete : function(args) {\r\n            //delete resource . \r\n            //args : id and other info for the resource ,ex\r\n            //{\r\n            //  \"id\" : 234,  // the own id, required\r\n            //  \"fileId\"   : 2 // the parent resource id, option by resource\r\n            //}         \r\n\r\n            // HTTP request : DELETE http://center.utilhub.com/registry/v1/apps/{appid}\r\n            var url = this.getBaseUrl(args);\r\n            return Xhr.del(url);\r\n        },\r\n\r\n        _patch : function(args){\r\n            //update resource metadata. \r\n            //args : id and other info for the resource ,ex\r\n            //{\r\n            //  \"id\" : 234,  // the own id, required\r\n            //  \"data\" : body // the own data,required\r\n            //  \"fileId\"   : 2 // the parent resource id, option by resource\r\n            //}\r\n            var url = this.getBaseUrl(args);\r\n            return Xhr.patch(url, args);\r\n        },\r\n        query: function(params) {\r\n            \r\n            return this._post(params);\r\n        },\r\n\r\n        retrieve: function(params) {\r\n            return this._get(params);\r\n        },\r\n\r\n        create: function(params) {\r\n            return this._post(params);\r\n        },\r\n\r\n        update: function(params) {\r\n            return this._put(params);\r\n        },\r\n\r\n        delete: function(params) {\r\n            // HTTP request : DELETE http://center.utilhub.com/registry/v1/apps/{appid}\r\n            return this._delete(params);\r\n        },\r\n\r\n        patch: function(params) {\r\n           // HTTP request : PATCH http://center.utilhub.com/registry/v1/apps/{appid}\r\n            return this._patch(params);\r\n        },\r\n        init: function(params) {\r\n            mixin(this,params);\r\n //           this._xhr = XHRx();\r\n       }\r\n    });\r\n\r\n    return Restful;\r\n})"]}