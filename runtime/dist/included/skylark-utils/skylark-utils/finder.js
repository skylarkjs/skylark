/**
 * skylark-utils - An Elegant HTML5 JavaScript Library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.5-beta
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./skylark","./langx","./browser","./noder"],function(e,r,t,n,u){function s(e){return function(r){var t=r.nodeName.toLowerCase();return"input"===t&&r.type===e}}function o(e){return function(r){var t=r.nodeName.toLowerCase();return("input"===t||"button"===t)&&r.type===e}}function a(e,t,n){for(var i=n&&r.isString(n);e=e.parentNode;){if(y(e,t))return e;if(n)if(i){if(y(e,n))break}else if(e==n)break}return null}function c(e,t,n){for(var i=[],u=n&&r.isString(n);(e=e.parentNode)&&9!==e.nodeType;)if(i.push(e),n)if(u){if(y(e,n))break}else if(e==n)break;return t&&(i=C.filter(i,t)),i}function f(e,r){return r=r||n.doc(),r.getElementById(e)}function l(e,r){for(var t=e.childNodes,n=[],i=0;i<t.length;i++){var e=t[i];1==e.nodeType&&n.push(e)}return r&&(n=C.filter(n,r)),n}function p(e,r){for(;e&&!y(e,r);)e=e.parentNode;return e}function d(e,r){try{return E.call(e.querySelectorAll(r))}catch(t){}return C.query(e,r)}function h(e,r){try{return e.querySelector(r)}catch(t){}var n=C.query(e,r);return n.length>0?n[0]:null}function b(e,r){return r||(r=e,e=document.body),y(e,r)?e:h(e,r)}function v(e,r){return r||(r=e,e=document.body),d(e,r)}function g(e,r,t){for(var n=e.childNodes,i=n[0];i;){if(1==i.nodeType){if(!r||y(i,r))return i;if(t)break}i=i.nextSibling}return null}function k(e,r,t){for(var n=e.childNodes,i=n[n.length-1];i;){if(1==i.nodeType){if(!r||y(i,r))return i;if(t)break}i=i.previousSibling}return null}function y(e,t){if(!t||!e||1!==e.nodeType)return!1;if(r.isString(t)){try{return F.call(e,t.replace(/\[([^=]+)=\s*([^'"\]]+?)\s*\]/g,'[$1="$2"]'))}catch(n){}return C.match(e,t)}return r.isArrayLike(t)?r.inArray(e,t)>-1:r.isPlainObject(t)?C.check(e,t):e===t}function S(e,r,t){for(var n=e.nextSibling;n;){if(1==n.nodeType){if(!r||y(n,r))return n;if(t)break}n=n.nextSibling}return null}function m(e,r){for(var t=e.nextSibling,n=[];t;)1==t.nodeType&&(r&&!y(t,r)||n.push(t)),t=t.nextSibling;return n}function x(e,r){var t=e.parentNode;return!t||r&&!y(t,r)?null:t}function w(e,r,t){for(var n=e.previousSibling;n;){if(1==n.nodeType){if(!r||y(n,r))return n;if(t)break}n=n.previousSibling}return null}function N(e,r){for(var t=e.previousSibling,n=[];t;)1==t.nodeType&&(r&&!y(t,r)||n.push(t)),t=t.previousSibling;return n}function A(e,r){for(var t=e.parentNode.firstChild,n=[];t;)1==t.nodeType&&t!==e&&(r&&!y(t,r)||n.push(t)),t=t.nextSibling;return n}var C={},q=Array.prototype.filter,E=Array.prototype.slice,F=t.matchesSelector;(function(){function e(e,u,s,a,f,p,d,h,b,v,g,k,y,S,m,x){if((u||t===-1)&&(r.expressions[++t]=[],n=-1,u))return"";if(s||a||n===-1){s=s||" ";var w=r.expressions[t];i&&w[n]&&(w[n].reverseCombinator=c(s)),w[++n]={combinator:s,tag:"*"}}var N=r.expressions[t][n];if(f)N.tag=f.replace(o,"");else if(p)N.id=p.replace(o,"");else if(d)d=d.replace(o,""),N.classList||(N.classList=[]),N.classes||(N.classes=[]),N.classList.push(d),N.classes.push({value:d,regexp:new RegExp("(^|\\s)"+l(d)+"(\\s|$)")});else if(y)x=x||m,x=x?x.replace(o,""):null,N.pseudos||(N.pseudos=[]),N.pseudos.push({key:y.replace(o,""),value:x,type:1==k.length?"class":"element"});else if(h){h=h.replace(o,""),g=(g||"").replace(o,"");var $,A;switch(b){case"^=":A=new RegExp("^"+l(g));break;case"$=":A=new RegExp(l(g)+"$");break;case"~=":A=new RegExp("(^|\\s)"+l(g)+"(\\s|$)");break;case"|=":A=new RegExp("^"+l(g)+"(-|$)");break;case"=":$=function(e){return g==e};break;case"*=":$=function(e){return e&&e.indexOf(g)>-1};break;case"!=":$=function(e){return g!=e};break;default:$=function(e){return!!e}}""==g&&/^[*$^]=$/.test(b)&&($=function(){return!1}),$||($=function(e){return e&&A.test(e)}),N.attributes||(N.attributes=[]),N.attributes.push({key:h,operator:b,value:g,test:$})}return""}var r,t,n,i,u={},s={},o=/\\/g,a=function(n,o){if(null==n)return null;if(n.Slick===!0)return n;n=(""+n).replace(/^\s+|\s+$/g,""),i=!!o;var c=i?s:u;if(c[n])return c[n];for(r={Slick:!0,expressions:[],raw:n,reverse:function(){return a(this.raw,!0)}},t=-1;n!=(n=n.replace(p,e)););return r.length=r.expressions.length,c[r.raw]=i?f(r):r},c=function(e){return"!"===e?" ":" "===e?"!":/^!/.test(e)?e.replace(/^!/,""):"!"+e},f=function(e){for(var r=e.expressions,t=0;t<r.length;t++){for(var n=r[t],i={parts:[],tag:"*",combinator:c(n[0].combinator)},u=0;u<n.length;u++){var s=n[u];s.reverseCombinator||(s.reverseCombinator=" "),s.combinator=s.reverseCombinator,delete s.reverseCombinator}n.reverse().push(i)}return e},l=function(){var e=/(?=[\-\[\]{}()*+?.\\\^$|,#\s])/g,r="\\";return function(t){return t.replace(e,r)}}(),p=new RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+l(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])")),d=this.Slick||{};d.parse=function(e){return a(e)},d.escapeRegExp=l,this.Slick||(this.Slick=d)}).apply(C);var T=/^(?:input|select|textarea|button)$/i,L=/^h\d$/i,E=Array.prototype.slice;C.parseSelector=C.Slick.parse;var R=C.pseudos={button:function(e){var r=e.nodeName.toLowerCase();return"input"===r&&"button"===e.type||"button"===r},checked:function(e){return!!e.checked},contains:function(e,r,t,n){if($(this).text().indexOf(n)>-1)return this},disabled:function(e){return!!e.disabled},enabled:function(e){return!e.disabled},eq:function(e,r,t,n){return r==n},even:function(e,r,t,n){return r%2===1},focus:function(e){return document.activeElement===e&&(e.href||e.type||e.tabindex)},first:function(e,r){return 0===r},gt:function(e,r,t,n){return r>n},has:function(e,r,t,n){return b(e,n)},header:function(e){return L.test(e.nodeName)},hidden:function(e){return!C.pseudos.visible(e)},input:function(e){return T.test(e.nodeName)},last:function(e,r,t){return r===t.length-1},lt:function(e,r,t,n){return r<n},not:function(e,r,t,n){return!y(e,n)},odd:function(e,r,t,n){return r%2===0},parent:function(e){return!!e.parentNode},selected:function(e){return!!e.selected},text:function(e){return"text"===e.type},visible:function(e){return e.offsetWidth&&e.offsetWidth}};["first","eq","last"].forEach(function(e){R[e].isArrayFilter=!0}),R.nth=R.eq;for(i in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})R[i]=s(i);for(i in{submit:!0,reset:!0})R[i]=o(i);C.divide=function(e){var r,t,n,i,u,s="",o=[];if((t=e.id)&&(s+="#"+t),n=e.classes)for(var a=n.length;a--;)s+="."+n[a].value;if(i=e.attributes)for(var a=0;a<i.length;a++)s+=i[a].operator?"["+i[a].key+i[a].operator+JSON.stringify(i[a].value)+"]":"["+i[a].key+"]";if(u=e.pseudos)for(a=u.length;a--;)part=u[a],this.pseudos[part.key]?o.push(part):void 0!==part.value&&(s+=":"+part.key+"("+JSON.stringify(part));return(r=e.tag)&&(s=r.toUpperCase()+s),s||(s="*"),{nativeSelector:s,customPseudos:o}},C.check=function(e,r,t,n,i){var u,s,o,a,c,f,l,p,d;if(!i){if(u=r.tag){var h=e.nodeName.toUpperCase();if("*"==u){if(h<"@")return!1}else if(h!=(u||"").toUpperCase())return!1}if((s=r.id)&&e.getAttribute("id")!=s)return!1;if(o=r.classes)for(f=o.length;f--;)if(p=e.getAttribute("class"),!p||!o[f].regexp.test(p))return!1;if(a=r.attributes)for(f=a.length;f--;)if(l=a[f],l.operator?!l.test(e.getAttribute(l.key)):!e.hasAttribute(l.key))return!1}if(c=r.pseudos)for(f=c.length;f--;)if(l=c[f],d=this.pseudos[l.key]){if((i&&d.isArrayFilter||!i&&!d.isArrayFilter)&&!d(e,t,n,l.value))return!1}else if(!i&&!F.call(e,l.key))return!1;return!0},C.match=function(e,t){var n;if(n=r.isString(t)?C.Slick.parse(t):t,!n)return!0;var i,u,s=n.expressions,o=0;for(i=0;u=s[i];i++)if(1==u.length){var a=u[0];if(this.check(e,a))return!0;o++}if(o==n.length)return!1;var c,f=this.query(document,n);for(i=0;c=f[i++];)if(c===e)return!0;return!1},C.filterSingle=function(e,r){var t=q.call(e,function(t,n){return C.check(t,r,n,e,!1)});return t=q.call(t,function(e,n){return C.check(e,r,n,t,!0)})},C.filter=function(e,t){var n;if(!r.isString(t))return C.filterSingle(e,t);n=C.Slick.parse(t);var i,u,s=n.expressions,o=[];for(i=0;u=s[i];i++){if(1!=u.length)throw new Error("not supported selector:"+t);var a=u[0],c=C.filterSingle(e,a);o=r.uniq(o.concat(c))}return o},C.combine=function(e,r){var t,n=r.combinator,i=r,u=[];switch(n){case">":u=l(e,i);break;case"+":t=S(e,i,!0),t&&u.push(t);break;case"^":t=g(e,i,!0),t&&u.push(t);break;case"~":u=m(e,i);break;case"++":var s=w(e,i,!0),o=S(e,i,!0);s&&u.push(s),o&&u.push(o);break;case"~~":u=A(e,i);break;case"!":u=c(e,i);break;case"!>":t=x(e,i),t&&u.push(t);break;case"!+":u=w(e,i,!0);break;case"!^":t=k(e,i,!0),t&&u.push(t);break;case"!~":u=N(e,i);break;default:var a=this.divide(r);if(u=E.call(e.querySelectorAll(a.nativeSelector)),a.customPseudos)for(var f=a.customPseudos.length-1;f>=0;f--)u=q.call(u,function(e,r){return C.check(e,{pseudos:[a.customPseudos[f]]},r,u,!1)}),u=q.call(u,function(e,r){return C.check(e,{pseudos:[a.customPseudos[f]]},r,u,!0)})}return u},C.query=function(e,t,n){for(var i,u,s=this.Slick.parse(t),o=[],a=s.expressions,c=0;i=a[c];c++){for(var f,l=[e],p=0;u=i[p];p++)f=r.map(l,function(e,r){return C.combine(e,u)}),f&&(l=f);f&&(o=o.concat(f))}return o};var P=function(){return P};return r.mixin(P,{ancestor:a,ancestors:c,byId:f,children:l,closest:p,descendant:h,descendants:d,find:b,findAll:v,firstChild:g,lastChild:k,matches:y,nextSibling:S,nextSiblings:m,parent:x,previousSibling:w,previousSiblings:N,pseudos:C.pseudos,siblings:A}),e.finder=P});
//# sourceMappingURL=sourcemaps/finder.js.map
