{"version":3,"sources":["_devices/orientation.js"],"names":["define","langx","orientation","window","DeviceOrientationEvent","addEventListener","eventData","lr","gamma","fb","beta","dir","alpha","grav","OrientationEvent","x","y","z","mixin","isSupported","on","duration","navigator","vibrate","off"],"mappings":";;;;;;;AAAAA,QACI,YACD,SAASC,GAqCR,QAASC,KACL,MAAOA,GAkBX,MArDKC,QAAOC,uBAGRD,OAAOE,iBAAkB,oBAAqB,SAAUC,KAGhDC,GAAID,EAAUE,MACdC,GAAIH,EAAUI,KACdC,IAAKL,EAAUM,MACfC,KAAM,SAKX,GAEKV,OAAOW,kBAEfX,OAAOE,iBAAiB,iBAAkB,SAAUC,KAG5CC,GAAkB,GAAdD,EAAUS,EACdN,GAAIH,EAAUU,MAGdL,IAAK,KACLE,KAAMP,EAAUW,MAKrB,GAOPhB,EAAMiB,MAAMhB,GACRiB,YAAc,WACV,SAAUhB,OAAOC,yBAA0BD,OAAOW,mBAGtDM,GAAK,SAASC,GACVC,UAAUC,QAAQF,IAGtBG,IAAM,WACFF,UAAUC,QAAQ,MAKlBrB","file":"../../_devices/orientation.js","sourcesContent":["define([\n    \"../langx\"\n], function(langx) {\n\n    // setup\n    if ( window.DeviceOrientationEvent ) {\n        \n        // Listen for the deviceorientation event and handle the raw data\n        window.addEventListener( 'deviceorientation', function( eventData ) {\n            \n            var data = {\n                lr: eventData.gamma, // gamma is the left-to-right tilt in degrees, where right is positive\n                fb: eventData.beta, // beta is the front-to-back tilt in degrees, where front is positive\n                dir: eventData.alpha, // alpha is the compass direction the device is facing in degrees\n                grav: null\n            };\n            \n            //ps.publish( data );\n            \n        }, false);\n        \n    } else if ( window.OrientationEvent ) {\n        \n        window.addEventListener('MozOrientation', function( eventData ) {\n            \n            var data = {\n                lr: eventData.x * 90, // x is the left-to-right tilt from -1 to +1, so we need to convert to degrees\n                fb: eventData.y * -90, // y is the front-to-back tilt from -1 to +1, so we need to convert to degrees\n                            // We also need to invert the value so tilting the device towards us (forward) \n                            // results in a positive value. \n                dir: null, \n                grav: eventData.z // z is the vertical acceleration of the device\n            };\n            \n            //ps.publish( data );\n            \n        }, false);\n    }\n\n    function orientation() {\n        return orientation;\n    }\n\n    langx.mixin(orientation, {\n        isSupported : function(){\n            return !!(window.DeviceOrientationEvent || window.OrientationEvent);\n        },\n\n        on : function(duration) {\n            navigator.vibrate(duration);\n        },\n\n        off : function() {\n            navigator.vibrate(0);\n        }\n    });\n\n\n    return  orientation;\n});\n"]}