{"version":3,"sources":["velm.js"],"names":["define","skylark","langx","datax","dnd","eventer","filer","finder","fx","geom","mover","noder","styler","_delegator","fn","context","self","this","elem","domNode","ret","apply","concat","slice","call","arguments","HTMLElement","VisualElement","isArrayLike","map","el","Array","prototype","klass","klassName","init","node","isString","document","getElementById","root","body","velm","mixin","batch","nodes","action","args","forEach","elm","partial","name","props","delegate","names","find","selector","descendant"],"mappings":";;;;;;;AAAAA,QACI,YACA,UACA,UACA,QACA,YACA,UACA,WACA,OACA,SACA,UACA,UACA,YACD,SAASC,EAASC,EAAOC,EAAOC,EAAKC,EAASC,EAAOC,EAAQC,EAAIC,EAAMC,EAAOC,EAAOC,GAwBpF,QAASC,GAAWC,EAAIC,GACpB,MAAO,YACH,GAAIC,GAAOC,KACPC,EAAOF,EAAKG,QACZC,EAAMN,EAAGO,MAAMN,GAAUG,GAAMI,OAAOC,EAAMC,KAAKC,YAErD,IAAIL,EAAK,CACL,GAAIA,IAAQL,EACR,MAAOC,EAEHI,aAAeM,aACfN,EAAM,GAAIO,GAAcP,GACjBlB,EAAM0B,YAAYR,KACzBA,EAAMS,EAAIL,KAAKJ,EAAK,SAASU,GACzB,MAAIA,aAAcJ,aACP,GAAIC,GAAcP,GAElBU,KAM3B,MAAOV,IA9Cf,GAAIS,GAAME,MAAMC,UAAUH,IACtBN,EAAQQ,MAAMC,UAAUT,MAExBI,EAAgBzB,EAAM+B,OACtBC,UAAW,gBAEXC,KAAQ,SAASC,GACTlC,EAAMmC,SAASD,KACfA,EAAOE,SAASC,eAAeH,IAEnCnB,KAAKE,QAAUiB,KAInBI,EAAO,GAAIb,GAAcW,SAASG,MAClCC,EAAO,SAASN,GACZ,MAAIA,GACO,GAAIT,GAAcS,GAElBI,EA2MnB,OA5KAtC,GAAMyC,MAAMD,GACRE,MAAO,SAASC,EAAOC,EAAQC,GAM3B,MALAF,GAAMG,QAAQ,SAASZ,GACnB,GAAIa,GAAOb,YAAgBT,GAAiBS,EAAOM,EAAKN,EACxDa,GAAIH,GAAQzB,MAAM4B,EAAKF,KAGpB9B,MAGXuB,KAAM,GAAIb,GAAcW,SAASG,MAEjCd,cAAeA,EAEfuB,QAAU,SAASC,EAAKrC,GACpB,GAAIsC,KAEJA,GAAMD,GAAQrC,EAEda,EAAcuB,QAAQE,IAG1BC,SAAU,SAASC,EAAOvC,GACtB,GAAIqC,KAEJE,GAAMN,QAAQ,SAASG,GACnBC,EAAMD,GAAQtC,EAAWE,EAAQoC,GAAOpC,KAG5CY,EAAcuB,QAAQE,MAK9BV,EAAKW,UACD,OACA,OACA,OACA,aACA,aACA,OACA,OACDlD,GAGHuC,EAAKW,UACD,YACA,aACDjD,GAIHsC,EAAKW,UACD,MACA,KACA,MACA,YACA,WACDhD,GAGHqC,EAAKW,UACD,SACA,YACD/C,GAGHoC,EAAKW,UACD,WACA,YACA,WACA,aACA,OACA,UACA,aACA,YACA,UACA,cACA,eACA,SACA,kBACA,mBACA,YACD9C,GAEHmC,EAAKa,KAAO,SAASC,GACjB,MAAiB,SAAbA,EACOvC,KAAKuB,KAELvB,KAAKuB,KAAKiB,WAAWD,IAKpCd,EAAKW,UACD,UACA,SACA,UACA,SACA,aACA,OACA,cACA,OACA,UACD7C,GAIHkC,EAAKW,UACD,gBACA,mBACA,eACA,eACA,aACA,cACA,cACA,SACA,gBACA,eACA,iBACA,eACA,WACA,mBACA,eACA,iBACA,aACA,YACA,OACA,SACD5C,GAGHiC,EAAKW,UACD,WACDjD,GAIHsC,EAAKW,UACD,QACA,SACA,SACA,QACA,WACA,WACA,QACA,OACA,YACA,WACA,UACA,SACA,UACA,UACA,QACA,WACA,UACA,eACA,UACD1C,GAGH+B,EAAKW,UACD,WACA,YACA,MACA,WACA,OACA,cACA,cACA,OACA,eACDzC,GACIX,EAAQyC,KAAOA","file":"../velm.js","sourcesContent":["define([\n    \"./skylark\",\n    \"./langx\",\n    \"./datax\",\n    \"./dnd\",\n    \"./eventer\",\n    \"./filer\",\n    \"./finder\",\n    \"./fx\",\n    \"./geom\",\n    \"./mover\",\n    \"./noder\",\n    \"./styler\"\n], function(skylark, langx, datax, dnd, eventer, filer, finder, fx, geom, mover, noder, styler) {\n    var map = Array.prototype.map,\n        slice = Array.prototype.slice;\n\n    var VisualElement = langx.klass({\n        klassName: \"VisualElement\",\n\n        \"init\": function(node) {\n            if (langx.isString(node)) {\n                node = document.getElementById(node);\n            }\n            this.domNode = node;\n        }\n    });\n\n    var root = new VisualElement(document.body),\n        velm = function(node) {\n            if (node) {\n                return new VisualElement(node);\n            } else {\n                return root;\n            }\n        };\n\n    function _delegator(fn, context) {\n        return function() {\n            var self = this,\n                elem = self.domNode,\n                ret = fn.apply(context, [elem].concat(slice.call(arguments)));\n\n            if (ret) {\n                if (ret === context) {\n                    return self;\n                } else {\n                    if (ret instanceof HTMLElement) {\n                        ret = new VisualElement(ret);\n                    } else if (langx.isArrayLike(ret)) {\n                        ret = map.call(ret, function(el) {\n                            if (el instanceof HTMLElement) {\n                                return new VisualElement(ret);\n                            } else {\n                                return el;\n                            }\n                        })\n                    }\n                }\n            }\n            return ret;\n        };\n    }\n\n    langx.mixin(velm, {\n        batch: function(nodes, action, args) {\n            nodes.forEach(function(node) {\n                var elm = (node instanceof VisualElement) ? node : velm(node);\n                elm[action].apply(elm, args);\n            });\n\n            return this;\n        },\n\n        root: new VisualElement(document.body),\n\n        VisualElement: VisualElement,\n\n        partial : function(name,fn) {\n            var props = {};\n\n            props[name] = fn;\n\n            VisualElement.partial(props);\n        },\n\n        delegate: function(names, context) {\n            var props = {};\n\n            names.forEach(function(name) {\n                props[name] = _delegator(context[name], context);\n            });\n\n            VisualElement.partial(props);\n        }\n    });\n\n    // from ./datax\n    velm.delegate([\n        \"attr\",\n        \"data\",\n        \"prop\",\n        \"removeAttr\",\n        \"removeData\",\n        \"text\",\n        \"val\"\n    ], datax);\n\n    // from ./dnd\n    velm.delegate([\n        \"draggable\",\n        \"droppable\"\n    ], dnd);\n\n\n    // from ./eventer\n    velm.delegate([\n        \"off\",\n        \"on\",\n        \"one\",\n        \"shortcuts\",\n        \"trigger\"\n    ], eventer);\n\n    // from ./filer\n    velm.delegate([\n        \"picker\",\n        \"dropzone\"\n    ], filer);\n\n    // from ./finder\n    velm.delegate([\n        \"ancestor\",\n        \"ancestors\",\n        \"children\",\n        \"descendant\",\n        \"find\",\n        \"findAll\",\n        \"firstChild\",\n        \"lastChild\",\n        \"matches\",\n        \"nextSibling\",\n        \"nextSiblings\",\n        \"parent\",\n        \"previousSibling\",\n        \"previousSiblings\",\n        \"siblings\"\n    ], finder);\n\n    velm.find = function(selector) {\n        if (selector === \"body\") {\n            return this.root;\n        } else {\n            return this.root.descendant(selector);\n        }\n    };\n\n    // from ./fx\n    velm.delegate([\n        \"animate\",\n        \"fadeIn\",\n        \"fadeOut\",\n        \"fadeTo\",\n        \"fadeToggle\",\n        \"hide\",\n        \"scrollToTop\",\n        \"show\",\n        \"toggle\"\n    ], fx);\n\n\n    // from ./geom\n    velm.delegate([\n        \"borderExtents\",\n        \"boundingPosition\",\n        \"boundingRect\",\n        \"clientHeight\",\n        \"clientSize\",\n        \"clientWidth\",\n        \"contentRect\",\n        \"height\",\n        \"marginExtents\",\n        \"offsetParent\",\n        \"paddingExtents\",\n        \"pagePosition\",\n        \"pageRect\",\n        \"relativePosition\",\n        \"relativeRect\",\n        \"scrollIntoView\",\n        \"scrollLeft\",\n        \"scrollTop\",\n        \"size\",\n        \"width\"\n    ], geom);\n\n    // from ./mover\n    velm.delegate([\n        \"movable\"\n    ], dnd);\n\n\n    // from ./noder\n    velm.delegate([\n        \"after\",\n        \"append\",\n        \"before\",\n        \"clone\",\n        \"contains\",\n        \"contents\",\n        \"empty\",\n        \"html\",\n        \"isChildOf\",\n        \"ownerDoc\",\n        \"prepend\",\n        \"remove\",\n        \"replace\",\n        \"reverse\",\n        \"throb\",\n        \"traverse\",\n        \"wrapper\",\n        \"wrapperInner\",\n        \"unwrap\"\n    ], noder);\n\n    // from ./styler\n    velm.delegate([\n        \"addClass\",\n        \"className\",\n        \"css\",\n        \"hasClass\",\n        \"hide\",\n        \"isInvisible\",\n        \"removeClass\",\n        \"show\",\n        \"toggleClass\"\n    ], styler);\n    return skylark.velm = velm;\n});\n"]}