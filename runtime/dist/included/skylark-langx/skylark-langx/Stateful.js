/**
 * skylark-langx - A simple JavaScript language extension library, including class support, Evented class, Deferred class and some commonly used tool functions.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.5
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./Evented"],function(t){var i=t.inherit({init:function(t,i){var n=t||{};i||(i={}),this.cid=uniqueId(this.cidPrefix),this.attributes={},i.collection&&(this.collection=i.collection),i.parse&&(n=this.parse(n,i)||{});var e=result(this,"defaults");n=mixin({},e,n),this.set(n,i),this.changed={}},changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",toJSON:function(t){return clone(this.attributes)},get:function(t){return this.attributes[t]},has:function(t){return null!=this.get(t)},set:function(t,i,n){if(null==t)return this;var e;if("object"==typeof t?(e=t,n=i):(e={})[t]=i,n||(n={}),!this._validate(e,n))return!1;var r=n.unset,s=n.silent,u=[],h=this._changing;this._changing=!0,h||(this._previousAttributes=clone(this.attributes),this.changed={});var a=this.attributes,o=this.changed,c=this._previousAttributes;for(var l in e)i=e[l],isEqual(a[l],i)||u.push(l),isEqual(c[l],i)?delete o[l]:o[l]=i,r?delete a[l]:a[l]=i;if(this.idAttribute in e&&(this.id=this.get(this.idAttribute)),!s){u.length&&(this._pending=n);for(var d=0;d<u.length;d++)this.trigger("change:"+u[d],this,a[u[d]],n)}if(h)return this;if(!s)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,i){return this.set(t,void 0,mixin({},i,{unset:!0}))},clear:function(t){var i={};for(var n in this.attributes)i[n]=void 0;return this.set(i,mixin({},t,{unset:!0}))},hasChanged:function(t){return null==t?!isEmptyObject(this.changed):void 0!==this.changed[t]},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&clone(this.changed);var i=this._changing?this._previousAttributes:this.attributes,n={};for(var e in t){var r=t[e];isEqual(i[e],r)||(n[e]=r)}return!isEmptyObject(n)&&n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return clone(this._previousAttributes)},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},mixin({},t,{validate:!0}))},_validate:function(t,i){if(!i.validate||!this.validate)return!0;t=mixin({},this.attributes,t);var n=this.validationError=this.validate(t,i)||null;return!n||(this.trigger("invalid",this,n,mixin(i,{validationError:n})),!1)}});return i});
//# sourceMappingURL=sourcemaps/Stateful.js.map
